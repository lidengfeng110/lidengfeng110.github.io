<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Hexo</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Hexo</h1><a id="logo" href="/.">Hexo</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h2 class="post-title"><a href="/2018/08/09/keepalived高可用/">Ansible</a></h2><div class="post-meta"><p><span class="date">2018-08-09</span></p></div><div class="post-content"><p>  在持久存储层上，通常有三种格式的数据需要存储，分别为：第一个是结构化数据存储，放在关系型数据库当中，如： mysql , mariadb 等<br>第二个是半结构化数据存储，如：芒果db 等，这个层级的产品很多，流派也很多。 第三种是非结构化数据存储，通常存储在分布式文件系统或者分布式存储当中。</p>
<p>HA Cluster（高可用集群）：<br>    ha services:resources(资源，分为IP地址跟运行的进程两种资源)</p>
<pre><code>集群类型：LB（lvs/nginx（http/upstream, stream/upstream））、HA、HP

    SPoF: Single Point of Failure

系统可用性的公式：A=MTBF/（MTBF+MTTR）  可用性=平均无故障时间/（平均无故障时间+平均修复时间）
    (0,1), 95%, 
    几个9（指标）: 99%, 99.5%, ...., 99.999%，99.9999%；
        99%： %1, 99.9%， 0.1%
</code></pre></div><p class="readmore"><a href="/2018/08/09/keepalived高可用/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/09/Nginx 各种实验演示/">no-title</a></h2><div class="post-meta"><p><span class="date">2018-08-09</span></p></div><div class="post-content"><hr>
<p>layout: post<br>title: Nginx各种实验演示<br>date: 2017-8-02<br>tags:</p>
<ul>
<li>Linux</li>
<li>nginx</li>
</ul>
<hr>
<h2 id="实验：Nginx-实现-SSL-加密"><a href="#实验：Nginx-实现-SSL-加密" class="headerlink" title="实验：Nginx 实现 SSL 加密"></a>实验：Nginx 实现 SSL 加密</h2><p>要实现 SSL 加密首先在服务器上生成证书，如：<br>创建 CA 第一种方法：<br>    cd /etc/pki/CA<br>(umask 077;openssl genrsa -out private/cakey.pem 2048)<br>openssl req -new -x509 -key private/cakey.pem -out cacert.pem -days 3650<br>            然后输入一些地区单位信息等，如：<br>                            CN<br>                             beijing<br>                             beijing<br>                             magedu<br>                             opt<br>                             <a href="http://www.a.com" target="_blank" rel="noopener">www.a.com</a><br> 这样 CA 的自签名证书就创建好了，还要创建两个文件  </p>
<p> touch serial index.txt<br>echo 01 &gt; serial  </p>
<p>接下来为 nginx 向 CA 申请证书<br> cd /etc/nginx/<br>mkdir ssl<br>cd ssl<br>(umask 077;openssl genrsa -out nginx.key 1024)<br>openssl req -new -key nginx.key -out nginx.csr<br>             然后输入一些地区单位信息等，如：<br>                            CN<br>                             beijing<br>                             beijing<br>                             magedu<br>                             opt<br>                             <a href="http://www.a.com" target="_blank" rel="noopener">www.a.com</a><br></div><p class="readmore"><a href="/2018/08/09/Nginx 各种实验演示/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/09/Nginx 详细介绍/">no-title</a></h2><div class="post-meta"><p><span class="date">2018-08-09</span></p></div><div class="post-content"><hr>
<p>layout: post<br>title: Nginx 详细介绍<br>date: 2017-7-28<br>tags:</p>
<ul>
<li>Linux</li>
<li>nginx</li>
</ul>
<hr>
<p>http 协议：80/tcp     全称：超文本传输协议<br>html : 超文本标记语言  </p>
<p>nginx是一个高性能的web服务和反向代理服务器    </p>
<p> 高连接并发的情况下可替代apache;选择epoll作为开发模型即事务处理模型;它包括io事务即io处理模型,内存状态事务模型等等    </p>
<p> nginx可做为负载均衡服务器：可以在内部直接支持和php程序对外进行服务，也支持http代理服务对外进行服务；  </p>
<p> 采用C进行编写，系统资源开销和cpu使用效率比perlbal要好很多  </p>
<p> 内存消耗少：3万并发连接下开启10个进程才消耗150M内存  </p>
<p> 内置健康检查功能：后端服务器当机不会影响前端访问  </p>
<p>  节省带宽：支持Gzip压缩，  </p>
<p> 稳定性高：用于反向代理，当机的概率微乎其微;master主进程跟workers进程是分开的不会因为worker进程故障而影响主进程  </p>
<p> 模块化设计：模块可以动态编译，较好的外围拓展，二次开发等  </p>
<p> 支持热部署：可以不停机重载文件  </p>
<p> 支持事件驱动、内存映射mmap、sendfile（可直接在内核空间加载头部）  </p></div><p class="readmore"><a href="/2018/08/09/Nginx 详细介绍/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/09/日志管理介绍/">no-title</a></h2><div class="post-meta"><p><span class="date">2018-08-09</span></p></div><div class="post-content"><hr>
<p>layout: post<br>title: 日志管理介绍<br>date: 2017-7-15<br>tags:</p>
<ul>
<li>Linux</li>
<li>日志</li>
</ul>
<hr>
<h2 id="日志介绍"><a href="#日志介绍" class="headerlink" title="日志介绍"></a>日志介绍</h2><h4 id="日志："><a href="#日志：" class="headerlink" title="日志："></a>日志：</h4><pre><code>历史事件:时间，地点，人物，事件  
 日志级别：事件的关键性程度，Loglevel   
</code></pre><h4 id="系统日志服务："><a href="#系统日志服务：" class="headerlink" title="系统日志服务："></a>系统日志服务：</h4><p>sysklogd :CentOS 5之前版本<br>     syslogd: system application 记录应用日志<br>      klogd: linux kernel 记录内核日志<br>     事件记录格式：<br>       日期时间 主机 进程[pid]: 事件内容<br>    C/S架构：通过TCP或UDP协议的服务完成日志记录传送，将分布在不同主 机的日志实现集中管理  </p>
<h4 id="rsyslog"><a href="#rsyslog" class="headerlink" title="rsyslog"></a>rsyslog</h4><p>rsyslog特性：CentOS6和7<br>     多线程<br>     UDP, TCP, SSL, TLS, RELP<br>     MySQL, PGSQL, Oracle实现日志存储<br>     强大的过滤器，可实现过滤记录日志信息中任意部分<br>     自定义输出格式<br>ELK：elasticsearch, logstash, kibana<br>     非关系型分布式数据库<br>     基于apache软件基金会jakarta项目组的项目lucene<br>     Elasticsearch是个开源分布式搜索引擎<br>     Logstash对日志进行收集、分析，并将其存储供以后使用<br>     kibana 可以提供的日志分析友好的 Web 界面</p></div><p class="readmore"><a href="/2018/08/09/日志管理介绍/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2018/08/09/Linux 防火墙各种规则实战应用/">no-title</a></h2><div class="post-meta"><p><span class="date">2018-08-09</span></p></div><div class="post-content"><hr>
<p>layout: post<br>title: Linux 防火墙各种规则实战应用<br>date: 2017-7-03<br>tags:</p>
<ul>
<li>Linux</li>
<li>防火墙</li>
</ul>
<hr>
<h4 id="防火墙的概念"><a href="#防火墙的概念" class="headerlink" title="防火墙的概念"></a>防火墙的概念</h4><p>iptables的基本认识<br>iptables的组成<br>iptables的基本语法<br>iptables之forward的概念<br>iptables之地址转换法则<br>SNAT源地址转换的具体实现<br>DNAT目标地址转换的具体实现<br>firewalld介绍<br>firewalld配置命令<br>rich规则  </p>
<p>安全技术<br>入侵检测与管理系统（Intrusion Detection Systems）：特点是不阻断任何网络 访问，量化、定位来自内外网络的威胁情况，主要以提供报告和事后监督为主， 提供有针对性的指导措施和安全决策依据。一般采用旁路部署方式<br>入侵防御系统（Intrusion Prevention System）：以透明模式工作，分析数据包 的内容如：溢出攻击、拒绝服务攻击、木马、蠕虫、系统漏洞等进行准确的分析 判断，在判定为攻击行为后立即予以阻断，主动而有效的保护网络的安全，一般 采用在线部署方式<br>防火墙（ FireWall ）：隔离功能，工作在网络或主机边缘，对进出网络或主机的 数据包基于一定的规则检查，并在匹配某规则时由规则定义的行为进行处理的一 组功能的组件，基本上的实现都是默认情况下关闭所有的通过型访问，只开放允 许访问的策略</p></div><p class="readmore"><a href="/2018/08/09/Linux 防火墙各种规则实战应用/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2017/10/15/memcache  缓存原理介绍/">memcache  缓存原理介绍</a></h2><div class="post-meta"><p><span class="date">2017-10-15</span></p></div><div class="post-content"><h2 id="memcached-是什么？"><a href="#memcached-是什么？" class="headerlink" title="memcached 是什么？"></a>memcached 是什么？</h2><p> memcached 是以 LiveJournal 旗下 Danga Interactive 公司的 Brad Fitzpatric 为首开发的一款软件。现在<br>已成为 mixi、hatena、Facebook、Vox、LiveJournal 等众多服务中提高 Web 应用扩展性的重要因素。许多 Web 应用都将数据保存到 RDBMS 中，应用服务器从中读取数据并在浏览器中显示。但随着数<br>据量的增大、访问的集中，就会出现 RDBMS 的负担加重、数据库响应恶恶化、网站显示延迟等重大<br>影响。<br>这时就该 memcached 大显身手了。memcached 是高性能的分布式内存缓存服务器。一般的使用目的<br>是，通过缓存数据库查询结果，减少数据库访问次数，以提高动态 Web 应用的速度、提高可扩展<br>性。  </p></div><p class="readmore"><a href="/2017/10/15/memcache  缓存原理介绍/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2017/10/08/tomcat 各种架构实验演示/">tomcat 各种架构实验演示</a></h2><div class="post-meta"><p><span class="date">2017-10-08</span></p></div><div class="post-content"><h2 id="实验：nginx-直接反代所有客户请求至后端-tomcat"><a href="#实验：nginx-直接反代所有客户请求至后端-tomcat" class="headerlink" title="实验：nginx 直接反代所有客户请求至后端 tomcat"></a>实验：nginx 直接反代所有客户请求至后端 tomcat</h2><pre><code>准备两台主机来模拟这个实验，第一台做前端反向代理的 nginx 服务器,IP 192.168.1.133 ,第二台做后端提供服务的 tomcat 服务器，IP 192.168.1.132。

现在第一台主机上安装 nginx 服务
yum install nginx -y

设置配置文件
vim /etc/nginx/conf.d/www.conf

server {
    listen 80;
    server_name www.zuyu.com;
    location / {
        proxy_pass http://192.168.1.132:8080;   
        # 因为后端的 tomcat 服务器上现在只有一台虚拟机，所以写 IP 就可以，访问时是本机默认的一个 localhost 。如果后端服务器上有多个虚拟机，那么要反代哪个虚拟机就写上哪个虚拟机的域名即可，并且还要本机能够解析这个域名。
    }
}

最后启动服务
systemctl start nginx 
</code></pre></div><p class="readmore"><a href="/2017/10/08/tomcat 各种架构实验演示/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2017/10/05/浅谈 tomcat 原理/">浅谈 tomcat 原理</a></h2><div class="post-meta"><p><span class="date">2017-10-05</span></p></div><div class="post-content"><p>程序=指令+数据<br>    程序=算法+数据结构<br>    编程范式：<br>        一算法为中心，数据结构服务于算法：过程式编程<br>        以数据为中心，代码服务于数据：对象式编程<br>            对象：属性、方法<br>            类别：实例化–对象，对象互操作<br>    过程式编程： C，bash ，Python , golang…<br>    对象式编程：java , Kotlin , c++  , Ruby , Pthon…</p>
<pre><code>golang:docker , etcd , kubernetes,...
java:hadoop, hbase , zookeeper , kafka , ...


write once,run anywhere : 一次编写，到处运行。

java 的核心目标在于不同的系统环境上，不同的底层硬件平台上都能够使一个代码在不同的环境下运行
库：代码 标注库， 3rd party（第三方库）
java:编程语言，类库，JVM（java虚拟机），类文件格式（字节码文件）

java 虚拟机是不能直接执行 java 的源代码的，需要先进行编译，编译是针对 java 虚拟机进行编译的 ，但 java 虚拟机所接受进来的也是字节码（bytecode）,
cgi ：通用网关接口技术
</code></pre></div><p class="readmore"><a href="/2017/10/05/浅谈 tomcat 原理/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2017/09/25/Varnish 缓存服务器介绍/">Varnish 缓存服务器介绍</a></h2><div class="post-meta"><p><span class="date">2017-09-25</span></p></div><div class="post-content"><p>Web Page Cache：</p>
<pre><code>squid --&gt; varnish

程序的运行具有局部性特征：
    时间局部性：一个数据被访问过之后，可能很快会被再次访问到；
    空间局部性：一个数据被访问时，其周边的数据也有可能被访问到

在互联网站点当中存在着两种缓存,一种是用来缓存简单的数据流或者是流失数据，另一种是用来缓存页面数据，但页面缓存也属于流式数据的一种。
    页面缓存：只是用来缓存外部服务器结构当中能够作为页面或者页面资源而存在的静态或者动态生成的不易发生变化，对不同客户端没有太大区别的。

cache：命中 

    热区：局部性；
        时效性：
            缓存空间耗尽：LRU，最近最少使用；
            过期：缓存清理

缓存命中率：hit/(hit+miss)
    (0,1)
    页面命中率：基于页面数量进行衡量
    字节命中率：基于页面的体积进行衡量
</code></pre></div><p class="readmore"><a href="/2017/09/25/Varnish 缓存服务器介绍/">Mehr lesen</a></p></div><div class="post"><h2 class="post-title"><a href="/2017/09/14/keepalived 各种高可用实战演练/">keepalived 各种高可用实战演练</a></h2><div class="post-meta"><p><span class="date">2017-09-14</span></p></div><div class="post-content"><h3 id="实验：-实现单主模型和双主模型的高可用。"><a href="#实验：-实现单主模型和双主模型的高可用。" class="headerlink" title="实验： 实现单主模型和双主模型的高可用。"></a>实验： 实现单主模型和双主模型的高可用。</h3><pre><code>任何做实验前都要保证时间同步。  
timedatectl set-timezone Asia/Shanghai
 还有防火墙、SElinux 等都设置完毕。  

 现在准备两个主机，R1 R2 ，分别在两台主机上安装 keepalived ，各自配置成急群众的两个节点。
 第一步，先把这两台主机配置成单主模型的集群，来验证地址是否能流动。
 第二步，用两个虚拟路由器工作在双主模型下。

      单主模型：两台主机
         在第一台主机上修改 keepalived 配置文件
</code></pre></div><p class="readmore"><a href="/2017/09/14/keepalived 各种高可用实战演练/">Mehr lesen</a></p></div><nav class="page-navigator"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Nächster</a></nav></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/keepalived高可用/">Ansible</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Nginx 各种实验演示/">Nginx 各种实验演示</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Nginx 详细介绍/">Nginx 详细介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/日志管理介绍/">日志管理介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Linux 防火墙各种规则实战应用/">Linux 防火墙各种规则实战应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/memcache  缓存原理介绍/">memcache  缓存原理介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/08/tomcat 各种架构实验演示/">tomcat 各种架构实验演示</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/05/浅谈 tomcat 原理/">浅谈 tomcat 原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/25/Varnish 缓存服务器介绍/">Varnish 缓存服务器介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/keepalived 各种高可用实战演练/">keepalived 各种高可用实战演练</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/DNS/" style="font-size: 15px;">DNS</a> <a href="/tags/haproxy/" style="font-size: 15px;">haproxy</a> <a href="/tags/用户组/" style="font-size: 15px;">用户组</a> <a href="/tags/LAMP/" style="font-size: 15px;">LAMP</a> <a href="/tags/权限管理/" style="font-size: 15px;">权限管理</a> <a href="/tags/练习题/" style="font-size: 15px;">练习题</a> <a href="/tags/su和sudo/" style="font-size: 15px;">su和sudo</a> <a href="/tags/MYSQL/" style="font-size: 15px;">MYSQL</a> <a href="/tags/文件系统/" style="font-size: 15px;">文件系统</a> <a href="/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/varnish/" style="font-size: 15px;">varnish</a> <a href="/tags/DHCP/" style="font-size: 15px;">DHCP</a> <a href="/tags/keepalied/" style="font-size: 15px;">keepalied</a> <a href="/tags/自动化/" style="font-size: 15px;">自动化</a> <a href="/tags/memcache/" style="font-size: 15px;">memcache</a> <a href="/tags/lvs/" style="font-size: 15px;">lvs</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/共享服务/" style="font-size: 15px;">共享服务</a> <a href="/tags/rpm/" style="font-size: 15px;">rpm</a> <a href="/tags/自动化安装/" style="font-size: 15px;">自动化安装</a> <a href="/tags/基本命令/" style="font-size: 15px;">基本命令</a> <a href="/tags/CA/" style="font-size: 15px;">CA</a> <a href="/tags/dns/" style="font-size: 15px;">dns</a> <a href="/tags/sed/" style="font-size: 15px;">sed</a> <a href="/tags/mini系统/" style="font-size: 15px;">mini系统</a> <a href="/tags/进程管理、计划任务/" style="font-size: 15px;">进程管理、计划任务</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archiv</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">Über</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">John Doe.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/totop.js?v=2.0.1" async></script></body></html>