<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title> | Hexo</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Hexo</h1><a id="logo" href="/.">Hexo</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title"></h1><div class="post-meta"><a href="/2018/08/09/日志管理介绍/#comments" class="comment-count"></a><p><span class="date">Aug 09, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Hits</i></i></span></p></div><div class="post-content"><hr>
<p>layout: post<br>title: 日志管理介绍<br>date: 2017-7-15<br>tags:</p>
<ul>
<li>Linux</li>
<li>日志</li>
</ul>
<hr>
<h2 id="日志介绍"><a href="#日志介绍" class="headerlink" title="日志介绍"></a>日志介绍</h2><h4 id="日志："><a href="#日志：" class="headerlink" title="日志："></a>日志：</h4><pre><code>历史事件:时间，地点，人物，事件  
 日志级别：事件的关键性程度，Loglevel   
</code></pre><h4 id="系统日志服务："><a href="#系统日志服务：" class="headerlink" title="系统日志服务："></a>系统日志服务：</h4><p>sysklogd :CentOS 5之前版本<br>     syslogd: system application 记录应用日志<br>      klogd: linux kernel 记录内核日志<br>     事件记录格式：<br>       日期时间 主机 进程[pid]: 事件内容<br>    C/S架构：通过TCP或UDP协议的服务完成日志记录传送，将分布在不同主 机的日志实现集中管理  </p>
<h4 id="rsyslog"><a href="#rsyslog" class="headerlink" title="rsyslog"></a>rsyslog</h4><p>rsyslog特性：CentOS6和7<br>     多线程<br>     UDP, TCP, SSL, TLS, RELP<br>     MySQL, PGSQL, Oracle实现日志存储<br>     强大的过滤器，可实现过滤记录日志信息中任意部分<br>     自定义输出格式<br>ELK：elasticsearch, logstash, kibana<br>     非关系型分布式数据库<br>     基于apache软件基金会jakarta项目组的项目lucene<br>     Elasticsearch是个开源分布式搜索引擎<br>     Logstash对日志进行收集、分析，并将其存储供以后使用<br>     kibana 可以提供的日志分析友好的 Web 界面</p>
<a id="more"></a>
<h4 id="rsyslog介绍"><a href="#rsyslog介绍" class="headerlink" title="rsyslog介绍"></a>rsyslog介绍</h4><p>术语，参见man logger<br>     facility：设施，从功能或程序上对日志进行归类<br>     auth, authpriv, cron, daemon,ftp,kern, lpr, mail, news, security(auth), user, uucp, local0-local7, syslog </p>
<p>   Priority 优先级别，从低到高排序<br>       debug, info, notice, warn(warning), err(error), crit(critical), alert, emerg(panic)   </p>
<p>  参看帮助： man 3 syslog</p>
<h4 id="rsyslog-1"><a href="#rsyslog-1" class="headerlink" title="rsyslog"></a>rsyslog</h4><p>程序包：rsyslog<br>主程序：/usr/sbin/rsyslogd<br>CentOS 6：service rsyslog {start|stop|restart|status}<br>CentOS 7：/usr/lib/systemd/system/rsyslog.service<br>配置文件：/etc/rsyslog.conf，/etc/rsyslog.d/<em>.conf<br>库文件： /lib64/rsyslog/</em>.so<br>配置文件格式：由三部分组成<br>       MODULES：相关模块配置<br>       GLOBAL DIRECTIVES：全局配置<br>       RULES：日志记录相关的规则配置</p>
<h4 id="rsyslog-2"><a href="#rsyslog-2" class="headerlink" title="rsyslog"></a>rsyslog</h4><p> RULES配置格式： facility.priority; facility.priority… target<br>facility：<br>      <em>: 所有的facility<br>       facility1,facility2,facility3,…：指定的facility列表<br> priority：  
     </em>: 所有级别<br>      none：没有级别，即不记录<br>      PRIORITY：指定级别（含）以上的所有级别<br>      =PRIORITY：仅记录指定级别的日志信息<br> target：<br>     文件路径：通常在/var/log/，文件路径前的-表示异步写入<br>      用户：将日志事件通知给指定的用户，* 表示登录的所有用户<br>     日志服务器：@host，把日志送往至指定的远程服务器记录  </p>
<p>如果要把日志记录在别的主机上，首先要在要被记录日志的主机上设定配置文件，可以设定在主配置文件中 /etc/rsyslog.conf/ ,也可以设定在子配置文件中 /etc/rsyslog.d/*.conf .</p>
<p>比如要在远程主机上记录本机的 SSH 服务的日记记录，首先要在本机的SSH 服务的配置文件 /etc/ssh/sshd_config中添加 ： 如  syslogFacility  local2  </p>
<pre><code>LogLevel     INFO  
</code></pre><p>还要在本机的日志配置文件中添加内容，如： vim /etc/rsyslog.d/ssh.conf  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在里面添加        local2                @192.168.30.7</span><br></pre></td></tr></table></figure>
<p>这就表示把本机上的 local2 模式的日志发送到远程主机192.168.30.7 主机上去，但是这样只是指定了远程主机，远程主机还要开启相应的协议，记录上哪个主句上，就要把哪个远程主机上日志配置文件中 TCP，UDP 协议和端口开启，并且还要在配置文件中明确指定local2 模式的日志存放在哪个文件下。这样访问本机的SSH 服务是才会在 远程主机 192.168.30.7 指定的那个文件中产生日志。  </p>
<p>  管道： | COMMAND，转发给其它命令处理</p>
<h4 id="启用网络日志服务"><a href="#启用网络日志服务" class="headerlink" title="启用网络日志服务"></a>启用网络日志服务</h4><p>通常的日志格式：  </p>
<p> 事件产生的日期时间 主机 进程(pid)：事件内容<br> 如： /var/log/messages,cron,secure等<br>配置rsyslog成为日志服务器  </p>
<pre><code>#### MODULES ####   
# Provides UDP syslog reception  
$ModLoad imudp  
$UDPServerRun 514   
</code></pre><p> Provides TCP syslog reception<br>      $ModLoad imtcp<br>     $InputTCPServerRun 514</p>
<h4 id="其它日志"><a href="#其它日志" class="headerlink" title="其它日志"></a>其它日志</h4><p>其它的日志文件   </p>
<p>/var/log/secure：系统安装日志，文本格式，应周期性分析   </p>
<p>/var/log/btmp：当前系统上，用户的失败尝试登录相关的日志信息，二进制格 式，lastb命令进行查看  </p>
<p>/var/log/wtmp：当前系统上，用户正常登录系统的相关日志信息，二进制格 式，last命令可以查看   </p>
<p>/var/log/lastlog:每一个用户最近一次的登录信息，二进制格式，lastlog命令 可以查看   </p>
<p>/var/log/dmesg：系统引导过程中的日志信息，文本格式   </p>
<p> 文本查看工具查看<br>     专用命令dmesg查看<br>/var/log/messages ：系统中大部分的信息   </p>
<p>/var/log/anaconda : anaconda的日志  </p>
<h4 id="日志管理journalctl"><a href="#日志管理journalctl" class="headerlink" title="日志管理journalctl"></a>日志管理journalctl</h4><p>Systemd 统一管理所有 Unit 的启动日志。带来的好处就是，可以只用 journalctl一个命令，查看所有日志（内核日志和应用日志）。日志的配置文件 /etc/systemd/journald.conf   </p>
<p> journalctl用法<br>查看所有日志（默认情况下 ，只保存本次启动的日志）  </p>
<p> journalctl<br>查看内核日志（不显示应用日志）  </p>
<p> journalctl -k<br>查看系统本次启动的日志  </p>
<p>journalctl -b<br>     journalctl -b -0  </p>
<p>查看上一次启动的日志（需更改设置）<br> journalctl -b -1</p>
<p>查看指定时间的日志  </p>
<p>  journalctl –since=”2017-10-30 18:10:30”<br>      journalctl –since “20 min ago”<br>       journalctl –since yesterday<br>      journalctl –since “2017-01-10” –until “2017-01-11 03:00”<br>      journalctl –since 09:00 –until “1 hour ago”  </p>
<p>显示尾部的最新10行日志<br>      journalctl -n   </p>
<p> 显示尾部指定行数的日志<br>      journalctl -n 20   </p>
<p>实时滚动显示最新日志<br>      journalctl -f  </p>
<p> 查看指定服务的日志<br>     journalctl /usr/lib/systemd/systemd   </p>
<p> 查看指定进程的日志<br>     journalctl _PID=1   </p>
<p>查看某个路径的脚本的日志<br>     journalctl /usr/bin/bash   </p>
<p> 查看指定用户的日志<br>      journalctl _UID=33 –since today   </p>
<p>查看某个 Unit 的日志<br>     journalctl -u nginx.service journalctl -u nginx.service –since today   </p>
<p>实时滚动显示某个 Unit 的最新日志<br>     journalctl -u nginx.service -f   </p>
<p> 合并显示多个 Unit 的日志<br>     journalctl -u nginx.service -u php-fpm.service –since today  </p>
<p>查看指定优先级（及其以上级别）的日志，共有8级<br>   0: emerg<br>    1: alert<br>    2: crit<br>   3: err<br>   4: warning<br>    5: notice<br>    6: info<br>    7: debug<br>       journalctl -p err -b </p>
<p>  日志默认分页输出，–no-pager 改为正常的标准输出<br>       journalctl –no-pager</p>
<p>以 JSON 格式（单行）输出<br>     journalctl -b -u nginx.service -o json   </p>
<p>以 JSON 格式（多行）输出，可读性更好<br>     journalctl -b -u nginx.serviceqq -o json-pretty   </p>
<p>显示日志占据的硬盘空间<br>     journalctl –disk-usage  </p>
<p> 指定日志文件占据的最大空间<br>     journalctl –vacuum-size=1G   </p>
<p>指定日志文件保存多久<br>     journalctl –vacuum-time=1years</p>
<p>###################################################################################</p>
<h2 id="实验：-把本机的日志记录到远程服务器的数据库中，并以图形方式展示日志。"><a href="#实验：-把本机的日志记录到远程服务器的数据库中，并以图形方式展示日志。" class="headerlink" title="实验： 把本机的日志记录到远程服务器的数据库中，并以图形方式展示日志。"></a>实验： 把本机的日志记录到远程服务器的数据库中，并以图形方式展示日志。</h2><p>现在准备两台主机 192.168.30.7    192.168.30.17  ，一个是日志服务器，一个是数据库服务器。  </p>
<p>把192.168.30.7 主机上的日志记录到远程主机192.168.30.17 的数据库中。  </p>
<p>首先在192.168.30.17 主机上把数据库准备好<br>yum install mariadb-server<br>启动服务<br>systemctl start mariadb</p>
<p>还有要把 192.168.30.7 主机上的日志记录到远程主机的数据库中，还要安装一个模块包，必须先把这个包装上。  </p>
<p>  yum install rsyslog-mysql.x86_64  </p>
<p>装完后查看下包的结构，里面有一个脚本和一个模块，将来要在存放日志的数据库主机上跑一下这个脚本。  </p>
<p>然后把这个脚本拷贝到远程主机上<br>scp /usr/share/doc/rsyslog-8.24.0/mysql-createDB.sql 192.168.30.17:  </p>
<p>然后回到192.168.30.17 主机上把传过来的脚本跑一下  </p>
<p>mysql &lt; mysql-createDB.sql<br>跑完后连接数据库可以看到生成新的数据库跟相应的表<br>接下来在创建一个用户<br>grant all on Syslog.* to syslog@’192.168.30.%’ identified by ‘centos’;<br>重新加载数据库<br>flush privileges;  </p>
<p>然后回到日志服务器上，还要把刚才装那个包中的模块加载到日志配置文件中。<br>vim /etc/rsyslog.conf<br>在里面的 MODULES 语句块下添加这个模块<br>$ModLoad ommysql.so<br>还要修改一个地方<br>*.info;mail.none;authpriv.none;cron.none             :ommysql:192.168.30.17,Syslog,syslog,centos  </p>
<p>修改完重启服务<br>systemctl restart rsyslog</p>
<p>这样就配置完成了，就可以在日志服务器上生成日志，到数据库服务器中进行查询了。  </p>
<p>查询命令： select * from SystemEvents \G<br>在日志服务器上可以用命令生成测试日志<br>logger<br>现在能看是能看了，但是查看的格式不太明显。  </p>
<p>现在我们要求把这种显示的结果以容易观看的格式显示出来。要显示必须安装一个软件 loganalyzer     ,这样我们在添加一台主机 192.168.30.27 ，在这台主机上搭建 LAMP  。  </p>
<p>这次我们用 yum 安装的方式搭建<br>先装包<br>yum install httpd php php-mysql php-gd<br>启动服务<br>systemctl start httpd   </p>
<p>接下来准备测试代码      vim /var/www/html/a.php<br>&lt;?php<br>$dsn=’mysql:host=192.168.30.17;dbname=Syslog’;<br>$username=’syslog’;<br>$passwd=’centos’;<br>$dbh=new   PDO($dsn,$username,$passwd);<br>var_dump($dbh);<br>?&gt;  </p>
<p>这样LAMP就搭好了，可以拿浏览器测试访问下看连接数据库连接成功没<br>在浏览器输入     192.168.30.27<br>如果现实出 OK 表示连接成功。  </p>
<p>那么接下来就下载前面说的那个软件（就是能把数据库显示的结果以容易看得方式显示）<br>现在官网上把相应的包下载到 192.168.30.27 这台主机上<br>      官网：<a href="http://www.loganalyzer.com" target="_blank" rel="noopener">www.loganalyzer.com</a>  </p>
<p>下载的包     loganalyzer-4.1.6.tar.gz<br>下载完进行解包<br>tar xvf loganalyzer-4.1.5.tar.gz<br>解完包生成一个文件夹<br>loganalyzer-4.1.5<br>然后把  loganalyzer-4.1.5/ 这个目录下 src/  目录复制到站点默认目录下<br>cp /loganalyzer-4.1.5/src/* /var/www/html/log  </p>
<p>先 cd 到 /var/www/html/log 目录下 ，因为 apache 账号对这个目录没有写权限，所以一会 loganalyzer 要对这个目录下的文件进行修改，所以接下来还得准备一个配置文件，让他对目录下的文件具有写权限。      </p>
<p>首先创建一个配置文件      touch /var/www/html/log/config.php  </p>
<p>然后加上权限        chmod 666 /var/www/html/log/config.php</p>
<p>接下来就拿浏览器进行访问了      192.168.39.27/log<br>连接上出现一个模块点击上面的 Here （安装），接下来就可以填写一些数据库的登录信息了。<br>登录上就可以查看图形化的日志信息了。<br>整个过程做完还要回收一下权限<br>在192.168.30.27 主机上执行    chmod 644 config.php  </p>
<h5 id="到此就用-loganalyzer-实现图形日志了。"><a href="#到此就用-loganalyzer-实现图形日志了。" class="headerlink" title="到此就用 loganalyzer 实现图形日志了。"></a>到此就用 loganalyzer 实现图形日志了。</h5><p>#################################################################################</p>
<p>示例：rsyslog将日志记录于MySQL中   </p>
<p>(1) 准备MySQL Server<br>(2) 在mysql server上授权rsyslog能连接至当前服务器<br>      GRANT ALL ON Syslog.* TO ‘USER‘@’HOST’ IDENTIFIED BY ‘PASSWORD’;<br>(3) 在rsyslog服务器上安装mysql模块相关的程序包<br>     yum install rsyslog-mysql<br>(4) 为rsyslog创建数据库及表；<br>      mysql -uUSERNAME -hHOST -pPASSWORD &lt; /usr/share/doc/rsyslog- 7.4.7/mysql-createDB.sql<br>(5) 配置rsyslog将日志保存到mysql中  </p>
<pre><code>#### MODULES ####  
$ModLoad ommysql  
#### RULES ####  
 facility.priority :ommysql:DBHOST,DBNAME,DBUSER, PASSWORD  
</code></pre><p>示例：通过loganalyzer展示数据库中的日志   </p>
<h6 id="1-在rsyslog服务器上准备amp或nmp组合"><a href="#1-在rsyslog服务器上准备amp或nmp组合" class="headerlink" title="(1) 在rsyslog服务器上准备amp或nmp组合"></a>(1) 在rsyslog服务器上准备amp或nmp组合</h6><pre><code>yum install httpd php php-mysql php-gd   
</code></pre><h6 id="2-安装LogAnalyzer"><a href="#2-安装LogAnalyzer" class="headerlink" title="(2) 安装LogAnalyzer"></a>(2) 安装LogAnalyzer</h6><pre><code>tar xf loganalyzer-4.1.5.tar.gz  
cp -a loganalyzer-4.1.5/src /var/www/html/loganalyzer  
cd /var/www/html/loganalyzer  
touch config.php  
chmod 666 config.php  
</code></pre><h6 id="3-配置loganalyzer"><a href="#3-配置loganalyzer" class="headerlink" title="(3) 配置loganalyzer"></a>(3) 配置loganalyzer</h6><pre><code>systemctl start httpd.service  
http://HOST/loganalyzer  
MySQL Native, Syslog Fields, Monitorware   
</code></pre><h6 id="4-安全加强"><a href="#4-安全加强" class="headerlink" title="(4) 安全加强"></a>(4) 安全加强</h6><pre><code>cd /var/www/html/loganalyzer  
 chmod 644 config.php  
</code></pre><h4 id="Logrotate日志存储"><a href="#Logrotate日志存储" class="headerlink" title="Logrotate日志存储"></a>Logrotate日志存储</h4><p>logrotate 程序是一个日志文件管理工具。用来把旧的日志文件删除，并创建新 的日志文件，称为日志转储或滚动。可以根据日志文件的大小，也可以根据其 天数来转储，这个过程一般通过 cron 程序来执行   </p>
<p>配置文件是 /etc/logrotate.conf<br>主要参数如下<br>compress 通过gzip 压缩转储以后的日志<br>nocompress 不需要压缩时，用这个参数<br>copytruncate 用于还在打开中的日志文件，把当前日志备份并截断<br>nocopytruncate 备份日志文件但是不截断<br>create mode owner group 转储文件，使用指定的文件模式创建新的日志文件  </p>
<p>nocreate 不建立新的日志文件<br>delaycompress 和 compress 一起使用时，转储的日志文件到下一次转储时 才压缩<br>nodelaycompress 覆盖 delaycompress 选项，转储并压缩<br>errors address 专储时的错误信息发送到指定的Email 地址<br>ifempty 即使是空文件也转储，是缺省选项。<br>notifempty 如果是空文件的话，不转储<br>mail address 把转储的日志文件发送到指定的E-mail 地址<br>nomail 转储时不发送日志文件<br>olddir directory 转储后的日志文件放入指定的目录，必须和当前日志文件在 同一个文件系统<br>noolddir 转储后的日志文件和当前日志文件放在同一个目录下  </p>
<p>prerotate/endscript 在转储以前需要执行的命令可以放入这个对，这两个关键 字必须单独成行<br>postrotate/endscript 在转储以后需要执行的命令可以放入这个对，这两个关 键字必须单独成行<br>daily 指定转储周期为每天   weekly 指定转储周期为每周<br>monthly 指定转储周期为每月<br>size 大小 指定日志超过多大时，就执行日志转储<br>rotate count 指定日志文件删除之前转储的次数，0 指没有备份，5 指保留5 个 备份<br>Missingok 如果日志不存在，提示错误<br>Nomissingok如果日志不存在，继续下一次日志，不提示错误</p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/08/09/Nginx 详细介绍/" class="pre"></a><a href="/2018/08/09/Linux 防火墙各种规则实战应用/" class="next"></a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contents</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#日志介绍"><span class="toc-text">日志介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#日志："><span class="toc-text">日志：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#系统日志服务："><span class="toc-text">系统日志服务：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rsyslog"><span class="toc-text">rsyslog</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rsyslog介绍"><span class="toc-text">rsyslog介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rsyslog-1"><span class="toc-text">rsyslog</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rsyslog-2"><span class="toc-text">rsyslog</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启用网络日志服务"><span class="toc-text">启用网络日志服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其它日志"><span class="toc-text">其它日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#日志管理journalctl"><span class="toc-text">日志管理journalctl</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实验：-把本机的日志记录到远程服务器的数据库中，并以图形方式展示日志。"><span class="toc-text">实验： 把本机的日志记录到远程服务器的数据库中，并以图形方式展示日志。</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#到此就用-loganalyzer-实现图形日志了。"><span class="toc-text">到此就用 loganalyzer 实现图形日志了。</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-在rsyslog服务器上准备amp或nmp组合"><span class="toc-text">(1) 在rsyslog服务器上准备amp或nmp组合</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-安装LogAnalyzer"><span class="toc-text">(2) 安装LogAnalyzer</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-配置loganalyzer"><span class="toc-text">(3) 配置loganalyzer</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-安全加强"><span class="toc-text">(4) 安全加强</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Logrotate日志存储"><span class="toc-text">Logrotate日志存储</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Nginx 详细介绍/">Nginx 详细介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/日志管理介绍/">日志管理介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Linux 防火墙各种规则实战应用/">Linux 防火墙各种规则实战应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/memcache  缓存原理介绍/">memcache  缓存原理介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/08/tomcat 各种架构实验演示/">tomcat 各种架构实验演示</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/05/浅谈 tomcat 原理/">浅谈 tomcat 原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/25/Varnish 缓存服务器介绍/">Varnish 缓存服务器介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/keepalived 各种高可用实战演练/">keepalived 各种高可用实战演练</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/08/keepalived高可用/">keepalived  高可用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/08/Nginx 各种实验演示/">keepalived  高可用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/DNS/" style="font-size: 15px;">DNS</a> <a href="/tags/LAMP/" style="font-size: 15px;">LAMP</a> <a href="/tags/练习题/" style="font-size: 15px;">练习题</a> <a href="/tags/权限管理/" style="font-size: 15px;">权限管理</a> <a href="/tags/用户组/" style="font-size: 15px;">用户组</a> <a href="/tags/文件系统/" style="font-size: 15px;">文件系统</a> <a href="/tags/su和sudo/" style="font-size: 15px;">su和sudo</a> <a href="/tags/MYSQL/" style="font-size: 15px;">MYSQL</a> <a href="/tags/keepalied/" style="font-size: 15px;">keepalied</a> <a href="/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/varnish/" style="font-size: 15px;">varnish</a> <a href="/tags/DHCP/" style="font-size: 15px;">DHCP</a> <a href="/tags/lvs/" style="font-size: 15px;">lvs</a> <a href="/tags/memcache/" style="font-size: 15px;">memcache</a> <a href="/tags/rpm/" style="font-size: 15px;">rpm</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/自动化安装/" style="font-size: 15px;">自动化安装</a> <a href="/tags/共享服务/" style="font-size: 15px;">共享服务</a> <a href="/tags/基本命令/" style="font-size: 15px;">基本命令</a> <a href="/tags/CA/" style="font-size: 15px;">CA</a> <a href="/tags/dns/" style="font-size: 15px;">dns</a> <a href="/tags/sed/" style="font-size: 15px;">sed</a> <a href="/tags/mini系统/" style="font-size: 15px;">mini系统</a> <a href="/tags/进程管理、计划任务/" style="font-size: 15px;">进程管理、计划任务</a> <a href="/tags/haproxy/" style="font-size: 15px;">haproxy</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">About</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">John Doe.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>