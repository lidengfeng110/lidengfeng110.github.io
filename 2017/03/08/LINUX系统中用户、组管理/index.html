<!DOCTYPE html>
<html>
    <!-- title -->




<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" >
    <meta name="author" content="John Doe">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="John Doe">
    <meta name="keywords" content="Hexo | John Doe">
    <meta name="description" content="">
    <meta name="Cache-Control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>安装管理包：LINUX系统中用户、组管理 · 李登峰</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s 1;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href= /css/style.css?v=20180630 as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <link rel="stylesheet" href= /css/mobile.css?v=20180630 media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href= "/assets/favicon.ico" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script" />
    <link rel="preload" href="/scripts/main.js" as="script" />
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
</head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- post页的toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >博客</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">安装管理包：LINUX系统中用户、组管理</a>
            </div>
    </div>
    
    <a class="home-link" href=/>博客</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style=








height:50vh;

>
    
    <!-- 主页  -->
    
    
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
            安装管理包：LINUX系统中用户、组管理
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- 文章页meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                    <div class= post-intro-tags >
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "Linux">Linux</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "用户组">用户组</a>
    
</div>
                
                
                    <div class="post-intro-read">
                        <span>Word count: <span class="post-count">7,704</span> / Reading time: <span class="post-count">31 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2017/03/08</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div> 
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
        iPad: u.indexOf('iPad') > -1, //是否为iPad
        webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
        weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
        uc: u.indexOf('UCBrowser') > -1 //是否为android下的UC浏览器
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //所有字体开始加载
          // console.log('loading');
        },
        active: function () {  //所有字体已渲染
          fontLoaded();
        },
        inactive: function () { //字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <h4 id="用户和组的基本概念"><a href="#用户和组的基本概念" class="headerlink" title="用户和组的基本概念"></a>用户和组的基本概念</h4><blockquote>
<p>用户和组是操作系统中一种身份认证资源。  </p>
</blockquote>
<blockquote>
<p>每个用户都有用户名、用户的唯一编号uid(user id)、所属组及其默认的shell，可能还有密码、家目录、附属组、注释信息等。  </p>
</blockquote>
<blockquote>
<p>每个组也有自己的名称、组唯一编号gid(group id)。一般来说，gid和uid是可以不相同的，但绝大多数都会让它们保持一致，大致属于约定俗成类的概念吧。<br><a id="more"></a><br>组分为主组(primary group)和辅助组(secondary group)两种，用户一定会属于某个主组，也可以同时加入多个辅助组。    </p>
</blockquote>
<h6 id="在Linux中，用户分为3类："><a href="#在Linux中，用户分为3类：" class="headerlink" title="在Linux中，用户分为3类："></a>在Linux中，用户分为3类：</h6><blockquote>
<p>(1). 超级管理员  </p>
</blockquote>
<blockquote>
<p>超级管理员是最高权限者，它的uid=0，默认超级管理员用户名为root。因为uid默认具有唯一性，所以超级管理员默认只能有一个(如何添加额外的超级管理员，见useradd命令)，但这一个超级管理员的名称并非一定要是root。但是没人会去改root的名称，在后续非常非常多的程序中，都认为超级管理员名称为root，这里要是一改，牵一发而动全身。  </p>
</blockquote>
<blockquote>
<p>(2). 系统用户  </p>
</blockquote>
<blockquote>
<p>有时候需要一类具有某些特权但又不需要登录操作系统的用户，这类用户称为系统用户。它们的uid范围从201到999(不包括1000)，有些老版本范围是1到499(centos 6)，出于安全考虑，它们一般不用来登录，所以它们的shell一般是/sbin/nologin，而且大多数时候它们是没有家目录的。  </p>
</blockquote>
<blockquote>
<p>(3). 普通用户  </p>
</blockquote>
<blockquote>
<p>普通用户是权限受到限制的用户，默认只能执行/bin、/usr/bin、/usr/local/bin和自身家目录下的命令。它们的uid从500开始。尽管普通用户权限收到限制，但是它对自身家目录下的文件是有所有权限的。  </p>
</blockquote>
<blockquote>
<p>超级管理员和其他类型的用户，它们的命令提示符是不一样的。uid=0的超级管理员，命令提示符是”#”，其他的为”$”。  </p>
</blockquote>
<p><img src="https://images2015.cnblogs.com/blog/733013/201706/733013-20170614225857634-976854894.png" alt="image"></p>
<blockquote>
<p>默认root用户的家目录为/root，其他用户的家目录一般在/home下以用户名命名的目录中，如longshuai这个用户的家目录为/home/longshuai。当然，家目录是可以自定义位置和名称的。  </p>
</blockquote>
<h4 id="用户和组管理相关的文件"><a href="#用户和组管理相关的文件" class="headerlink" title="用户和组管理相关的文件"></a>用户和组管理相关的文件</h4><h5 id="用户文件-etc-passwd"><a href="#用户文件-etc-passwd" class="headerlink" title="用户文件/etc/passwd"></a>用户文件/etc/passwd</h5><h6 id="etc-passwd文件里记录的是操作系统中用户的信息，这里面记录了几行就表示系统中有几个系统用户。它的格式大致如下："><a href="#etc-passwd文件里记录的是操作系统中用户的信息，这里面记录了几行就表示系统中有几个系统用户。它的格式大致如下：" class="headerlink" title="/etc/passwd文件里记录的是操作系统中用户的信息，这里面记录了几行就表示系统中有几个系统用户。它的格式大致如下："></a>/etc/passwd文件里记录的是操作系统中用户的信息，这里面记录了几行就表示系统中有几个系统用户。它的格式大致如下：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/bash</span><br><span class="line">nginx:x:498:499:Nginx web server:/var/lib/nginx:/sbin/nologin</span><br><span class="line">longshuai:x:1000:1000::/home/longshuai:/bin/bash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>每一行表示一个用户，每一行的格式都是6个冒号共7列属性，其中有很多用户的某些列属性是留空的。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名:x:uid:gid:用户注释信息:家目录:使用的shell类型</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">第一列：用户名。注意两个个特殊的用户名，root、nobody  </span><br><span class="line"></span><br><span class="line">第二列：x。在以前老版本的系统上，第二列是存放用户密码的，但是密码和用户信息放在一起不便于管理(密钥要保证其特殊属性)，所以后来将密码单独放在另一个文件/etc/shadow中，这里就都写成x了  </span><br><span class="line"></span><br><span class="line">第三列：uid  </span><br><span class="line"></span><br><span class="line">第四列：gid  </span><br><span class="line"></span><br><span class="line">第五列：用户注释信息。  </span><br><span class="line"></span><br><span class="line">第六列：用户家目录。注意root用户的家目录为/root  </span><br><span class="line"></span><br><span class="line">第七列：用户的默认shell，虽然叫shell，但其实可以是任意一个可执行程序或脚本。例如上面的/bin/bash、/sbin/nologin、/sbin/shutdown</span><br></pre></td></tr></table></figure>
<blockquote>
<p>用户的默认shell表示的是用户登录(如果允许登录)时的环境或执行的命令。例如shell为/bin/bash时，表示登录时就执行/bin/bash命令进入bash环境；shell为/sbin/nologin表示该用户不能登录，之所以不能登录不是因为指定了这个特殊的程序，而是由/sbin/nologin这个程序的功能实现的，假如修改Linux的源代码，将/sbin/nologin这个程序变成可登录，那么shell为/sbin/nologin时也是可以登录的。  </p>
</blockquote>
<h5 id="密码文件-etc-shadow"><a href="#密码文件-etc-shadow" class="headerlink" title="密码文件/etc/shadow"></a>密码文件/etc/shadow</h5><blockquote>
<p>/etc/shadow文件中存放的是用户的密码信息。该文件具有特殊属性，除了超级管理员，任何人都不能直接读取和修改该文件，而用户自身之所以能修改密码，则是因为该文件的suid属性，使得修改密码时临时提升为root权限。  </p>
</blockquote>
<h6 id="该文件的格式大致如下："><a href="#该文件的格式大致如下：" class="headerlink" title="该文件的格式大致如下："></a>该文件的格式大致如下：</h6><blockquote>
<p>root:$6$hS4yqJu7WQfGlk0M$Xj/SCS5z4BWSZKN0raNncu6VMuWdUVbDScMYxOgB7mXUj./dXJN0zADAXQUMg0CuWVRyZUu6npPLWoyv8eXPA.::0:99999:7::: ftp:<em>:16659:0:99999:7::: nobody:</em>:16659:0:99999:7::: longshuai:$6$8LGe6Eh6$vox9.OF3J9nD0KtOYj2hE9DjfU3iRN.v3up4PbKKGWLOy3k1Up50bbo7Xii/Uti05hlqhktAf/dZFy2RrGp5W/:17323:0:99999:7:::</p>
</blockquote>
<h6 id="每一行表示一个用户密码的属性，有8个冒号共9列属性。"><a href="#每一行表示一个用户密码的属性，有8个冒号共9列属性。" class="headerlink" title="每一行表示一个用户密码的属性，有8个冒号共9列属性。"></a>每一行表示一个用户密码的属性，有8个冒号共9列属性。</h6><blockquote>
<p>第一列：用户名。  </p>
</blockquote>
<blockquote>
<p>第二列：加密后的密码。但是这一列是有玄机的，有些特殊的字符表示特殊的意义。<br>①.该列留空，即”::”，表示该用户没有密码。<br>②.该列为”!”，即”:!:”，表示该用户被锁，被锁将无法登陆，但是可能其他的登录方式是不受限制的，如ssh key的方式，su的方式。<br>③.该列为”<em>“，即”:</em>:”，也表示该用户被锁，和”!”效果是一样的。<br>④.该列以”!”或”!!”开头，则也表示该用户被锁。<br>⑤.该列为”!!”，即”:!!:”，表示该用户从来没设置过密码。<br>⑥.如果格式为”$id$salt$hashed”，则表示该用户密码正常。其中$id$的id表示密码的加密算法，$1$表示使用MD5算法，$2a$表示使用Blowfish算法，”$2y$”是另一算法长度的Blowfish,”$5$”表示SHA-256算法，而”$6$”表示SHA-512算法，可见上面的结果中都是使用sha-512算法的。$5$和$6$这两种算法的破解难度远高于MD5。$salt$是加密时使用的salt，$hashed才是真正的密码部分。  </p>
</blockquote>
<blockquote>
<p>第三列：从1970年1月1日到上次密码修改经过的时间(天数)。通过计算现在离1970年1月1日的天数减去这个值，结果就是上次修改密码到现在已经经过了多少天，即现在的密码已经使用了多少天。  </p>
</blockquote>
<blockquote>
<p>第四列：密码最少使用期限(天数)。省略或者0表示不设置期限。例如，刚修改完密码又想修改，可以限制多久才能再次修改  </p>
</blockquote>
<blockquote>
<p>第五列：密码最大使用期限(天数)。超过了它不一定密码就失效，可能下一个字段设置了过期后的宽限天数。设置为空时将永不过期，后面设置的提醒和警告将失效。root等一些用户的已经默认设置为了99999，表示永不过期。如果值设置小于最短使用期限，用户将不能修改密码。  </p>
</blockquote>
<blockquote>
<p>第六列：密码过期前多少天就开始提醒用户密码将要过期。空或0将不提醒。  </p>
</blockquote>
<blockquote>
<p>第七列：密码过期后宽限的天数，在宽限时间内用户无法使用原密码登录，必须改密码或者联系管理员。设置为空表示没有强制的宽限时间，可以过期后的任意时间内修改密码。  </p>
</blockquote>
<blockquote>
<p>第八列：帐号过期时间。从1970年1月1日开始计算天数。设置为空帐号将永不过期，不能设置为0。不同于密码过期，密码过期后账户还有效，改密码后还能登录；帐号过期后帐号失效，修改密码重设密码都无法使用该帐号。  </p>
</blockquote>
<blockquote>
<p>第九列：保留字段。  </p>
</blockquote>
<h5 id="组文件-etc-group和-etc-gshadow"><a href="#组文件-etc-group和-etc-gshadow" class="headerlink" title="组文件/etc/group和/etc/gshadow"></a>组文件/etc/group和/etc/gshadow</h5><blockquote>
<p>大致知道有这么两个文件即可，至于文件中的内容无需关注。  </p>
</blockquote>
<blockquote>
<p>/etc/group包含了组信息。每行一个组，每一行3个冒号共4列属性。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:x:0: longshuai:x:500: xiaofang:x:501:zhangsan,lisi</span><br></pre></td></tr></table></figure>
<blockquote>
<p>第一列：组名。<br>第二列：占位符。<br>第三列：gid。<br>第四列：该组下的user列表，这些user成员以该组做为辅助组，多个成员使用逗号隔开。  </p>
</blockquote>
<blockquote>
<p>/etc/gshadow包含了组密码信息  </p>
</blockquote>
<h5 id="骨架目录-etc-skel"><a href="#骨架目录-etc-skel" class="headerlink" title="骨架目录/etc/skel"></a>骨架目录/etc/skel</h5><blockquote>
<p>骨架目录中的文件是每次新建用户时，都会复制到新用户家目录里的文件。默认只有3个环境配置文件，可以修改这里面的内容，或者添加几个文件在骨架目录中，以后新建用户时就会自动获取到这些环境和文件。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; ls –l -A /etc/skel</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root 18 Oct 16 2014 .bash_logout</span><br><span class="line">-rw-r--r--. 1 root root 176 Oct 16 2014 .bash_profile</span><br><span class="line">-rw-r--r--. 1 root root 124 Oct 16 2014 .bashrc</span><br></pre></td></tr></table></figure>
<p>删除家目录下这些文件，会导致某些设置出现问题。例如删除”.bashrc”这个文件，会导致提示符变异的问题，如下右图。  </p>
<p>  <img src="https://images2015.cnblogs.com/blog/733013/201706/733013-20170614225859103-308947433.png" alt="image"></p>
<blockquote>
<p>要解决这个问题，只需拷贝一个正常的.bashrc文件到其家目录中即可。一般还会修改该文件的所有者和权限。  </p>
</blockquote>
<h5 id="etc-login-defs"><a href="#etc-login-defs" class="headerlink" title="/etc/login.defs"></a>/etc/login.defs</h5><blockquote>
<p>设置用户帐号限制的文件。该文件里的配置对root用户无效。  </p>
</blockquote>
<blockquote>
<p>如果/etc/shadow文件里有相同的选项，则以/etc/shadow里的设置为准，也就是说/etc/shadow的配置优先级高于/etc/login.defs。  </p>
</blockquote>
<blockquote>
<p>该文件有很多配置项，文件的默认内容只给出了一小部分，若想知道全部的配置项以及配个配置项的详细说明，可以”man 5 login.defs”查看。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@xuexi ~]# less /etc/login.defs</span><br><span class="line">#QMAIL_DIR      Maildir              # QMAIL_DIR是Qmail邮件的目录，所以可以不设置它</span><br><span class="line">MAIL_DIR        /var/spool/mail      # 默认邮件根目录，即信箱</span><br><span class="line">#MAIL_FILE      .mail                # mail文件的格式是.mail</span><br><span class="line"></span><br><span class="line"># Password aging controls:</span><br><span class="line">PASS_MAX_DAYS   99999         # 密码最大有效期(天)</span><br><span class="line">PASS_MIN_DAYS   0             # 两次密码修改之间最小时间间隔</span><br><span class="line">PASS_MIN_LEN    5             # 密码最短长度</span><br><span class="line">PASS_WARN_AGE   7             # 密码过期前给警告信息的时间</span><br><span class="line"></span><br><span class="line"># 控制useradd创建用户时自动选择的uid范围</span><br><span class="line"># Min/max values for automatic uid selection in useradd</span><br><span class="line">UID_MIN                  1000</span><br><span class="line">UID_MAX                 60000</span><br><span class="line"># System accounts</span><br><span class="line">SYS_UID_MIN               201</span><br><span class="line">SYS_UID_MAX               999</span><br><span class="line"></span><br><span class="line"># 控制groupadd创建组时自动选择的gid范围</span><br><span class="line"># Min/max values for automatic gid selection in groupadd</span><br><span class="line">GID_MIN                  1000</span><br><span class="line">GID_MAX                 60000</span><br><span class="line"># System accounts</span><br><span class="line">SYS_GID_MIN               201</span><br><span class="line">SYS_GID_MAX               999</span><br><span class="line"></span><br><span class="line"># 设置此项后，在删除用户时，将自动删除用户拥有的at/cron/print等job</span><br><span class="line">#USERDEL_CMD    /usr/sbin/userdel_local</span><br><span class="line"></span><br><span class="line"># 控制useradd添加用户时是否默认创建家目录，useradd -m选项会覆盖此处设置</span><br><span class="line">CREATE_HOME     yes</span><br><span class="line"></span><br><span class="line"># 设置创建家目录时的umask值，若不指定则默认为022</span><br><span class="line">UMASK           077</span><br><span class="line"></span><br><span class="line"># 设置此项表示当组中没有成员时自动删除该组</span><br><span class="line"># 且useradd是否同时创建同用户名的主组。(该文件中并没有此项说明，来自于man useradd中-g选项的说明)</span><br><span class="line">USERGROUPS_ENAB yes</span><br><span class="line"></span><br><span class="line"># 设置用户和组密码的加密算法</span><br><span class="line">ENCRYPT_METHOD SHA512</span><br></pre></td></tr></table></figure>
<h6 id="注意，-etc-login-defs中的设置控制的是shadow-utils包中的组件，也就是说，该组件中的工具执行操作时会读取该文件中的配置。该组件中包含下面的程序："><a href="#注意，-etc-login-defs中的设置控制的是shadow-utils包中的组件，也就是说，该组件中的工具执行操作时会读取该文件中的配置。该组件中包含下面的程序：" class="headerlink" title="注意，/etc/login.defs中的设置控制的是shadow-utils包中的组件，也就是说，该组件中的工具执行操作时会读取该文件中的配置。该组件中包含下面的程序："></a>注意，/etc/login.defs中的设置控制的是shadow-utils包中的组件，也就是说，该组件中的工具执行操作时会读取该文件中的配置。该组件中包含下面的程序：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/gpasswd      ：administer /etc/group and /etc/gshadow</span><br><span class="line">/usr/bin/newgrp       ：log in to a new group，可用来修改gid，哪怕是正在登陆的会话也可以修改</span><br><span class="line">/usr/bin/sg           ：execute command as different group ID</span><br><span class="line">/usr/sbin/groupadd    ：添加组</span><br><span class="line">/usr/sbin/groupdel    ：删除组</span><br><span class="line">/usr/sbin/groupmems   ：管理当前用户的主组中的成员，root用户则可以指定要管理的组</span><br><span class="line">/usr/sbin/groupmod    ：modify a group definition on the system</span><br><span class="line">/usr/sbin/grpck       ：verify integrity of group files</span><br><span class="line">/usr/sbin/grpconv     ：无视它</span><br><span class="line">/usr/sbin/grpunconv   ：无视它</span><br><span class="line">/usr/sbin/pwconv      ：无视它</span><br><span class="line">/usr/sbin/pwunconv    ：无视它</span><br><span class="line">/usr/sbin/adduser     ：是useradd的一个软链接，添加用户</span><br><span class="line">/usr/sbin/chpasswd    ：update passwords in batch mode</span><br><span class="line">/usr/sbin/newusers    ：update and create new users in batch</span><br><span class="line">/usr/sbin/pwck        ：verify integrity of passsword files</span><br><span class="line">/usr/sbin/useradd     ：添加用户</span><br><span class="line">/usr/sbin/userdel     ：删除用户</span><br><span class="line">/usr/sbin/usermod     ：重定义用户信息</span><br><span class="line">/usr/sbin/vigr        ：edit the group and shadow-group file</span><br><span class="line">/usr/sbin/vipw        ：edit the password and shadow-password file</span><br><span class="line">/usr/bin/lastlog      ：输出所有用户或给定用户最近登录信息</span><br></pre></td></tr></table></figure>
<h5 id="etc-default-useradd"><a href="#etc-default-useradd" class="headerlink" title="/etc/default/useradd"></a>/etc/default/useradd</h5><blockquote>
<p>创建用户时的默认配置。useradd -D修改的就是此文件 。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@xuexi ~]# cat /etc/default/useradd  </span><br><span class="line"># useradd defaults file</span><br><span class="line">GROUP=100       # 在useradd使用-N或/etc/login.defs中USERGROUPS_ENAB=no时表示创建用户时不创建同用户名的主组(primary group)，</span><br><span class="line">                # 此时新建的用户将默认以此组为主组，网上关于该设置的很多说明都是错的，具体可看man useradd的-g选项或useradd -D的-g选项</span><br><span class="line">HOME=/home      # 把用户的家目录建在/home中</span><br><span class="line">INACTIVE=-1     # 是否启用帐号过期设置(是帐号过期不是密码过期)，-1表示不启用</span><br><span class="line">EXPIRE=         # 帐号过期时间，不设置表示不启用</span><br><span class="line">SHELL=/bin/bash # 新建用户默认的shell类型</span><br><span class="line">SKEL=/etc/skel  # 指定骨架目录，前文的/etc/skel就在这里</span><br><span class="line">CREATE_MAIL_SPOOL=yes  # 是否创建用户mail缓冲</span><br></pre></td></tr></table></figure>
<blockquote>
<p>man useradd的useradd -D选项介绍部分说明了这些项的意义。  </p>
</blockquote>
<h4 id="用户和组管理命令"><a href="#用户和组管理命令" class="headerlink" title="用户和组管理命令"></a>用户和组管理命令</h4><h5 id="useradd和adduser"><a href="#useradd和adduser" class="headerlink" title="useradd和adduser"></a>useradd和adduser</h5><h6 id="adduser是useradd的一个软链接。"><a href="#adduser是useradd的一个软链接。" class="headerlink" title="adduser是useradd的一个软链接。"></a>adduser是useradd的一个软链接。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">useradd [options] login_name</span><br><span class="line">选项说明：</span><br><span class="line">-b：指定家目录的basedir，默认为/home目录</span><br><span class="line">-d：指定用户家目录，不写时默认为/home/user_name</span><br><span class="line">-m：要创建家目录时，若家目录不存在则自动创建，若不指定该项且/etc/login.defs中的CREATE_HOME未启用时将不会创建家目录</span><br><span class="line">-M：显式指明不要创建家目录，会覆盖/etc/login.defs中的CREATE_HOME设置</span><br><span class="line"> </span><br><span class="line">-g：指定用户主组，要求组已存在</span><br><span class="line">-G：指定用户的辅助组，多个组以逗号分隔</span><br><span class="line">-N：明确指明不要创建和用户名同名的组名</span><br><span class="line">-U：明确指明要创建一个和用户名同名的组，并将用户加入到此组中</span><br><span class="line"></span><br><span class="line">-o：允许创建一个重复UID的用户，只有和-u选项同时使用时才生效</span><br><span class="line">-r：创建一个系统用户。useradd命令不会为此选项的系统用户创建家目录，除非明确使用-m选项</span><br><span class="line">-s：指定用户登录的shell，默认留空。此时将选择/etc/default/useradd中的SHELL变量设置</span><br><span class="line">-u：指定用户uid，默认uid必须唯一，除非使用了-o选项</span><br><span class="line">-c：用户的注释信息 </span><br><span class="line"></span><br><span class="line">-k：指定骨架目录(skeleton)</span><br><span class="line">-K：修改/etc/login.defs文件中有关于用户的配置项，不能修改组相关的配置。设置方式为KEY=VALUE，如-K UID_MIN=100</span><br><span class="line">-D：修改useradd创建用户时的默认选项，就修改/etc/default/useradd文件</span><br><span class="line">-e：帐户过期时间，格式为&quot;YYYY-MM-DD&quot;</span><br><span class="line">-f：密码过期后，该账号还能存活多久才被禁用，设置为0表示密码过期立即禁用帐户，设置为-1表示禁用此功能</span><br><span class="line">-l：不要将用户的信息写入到lastlog和faillog文件中。默认情况下，用户信息会写入到这两个文件中</span><br><span class="line"></span><br><span class="line">useradd -D [options]</span><br><span class="line">修改/etc/default/useradd文件</span><br><span class="line">选项说明：不加任何选项时会列出默认属性</span><br><span class="line">-b, --base-dir BASE_DIR</span><br><span class="line">-e, --expiredate EXPIRE_DATE</span><br><span class="line">-f, --inactive INACTIVE</span><br><span class="line">-g, --gid GROUP</span><br><span class="line">-s, --shell SHELL</span><br></pre></td></tr></table></figure>
<h6 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@xuexi ~]# useradd -D -e &quot;2016-08-20&quot;    # 设置用户2016-08-20过期</span><br><span class="line"></span><br><span class="line">[root@xuexi ~]# useradd -D</span><br><span class="line">GROUP=100</span><br><span class="line">HOME=/home</span><br><span class="line">INACTIVE=-1</span><br><span class="line">EXPIRE=2016-08-20</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">SKEL=/etc/skel</span><br><span class="line">CREATE_MAIL_SPOOL=yes</span><br><span class="line"></span><br><span class="line">[root@xuexi ~]# cat /etc/default/useradd</span><br><span class="line"># useradd defaults file</span><br><span class="line">GROUP=100</span><br><span class="line">HOME=/home</span><br><span class="line">INACTIVE=-1</span><br><span class="line">EXPIRE=2016-08-20</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">SKEL=/etc/skel</span><br><span class="line">CREATE_MAIL_SPOOL=yes</span><br></pre></td></tr></table></figure>
<blockquote>
<p>useradd创建用户时，默认会自动创建一个和用户名相同的用户组，这是/etc/login.defs中的USERGROUP_ENAB变量控制的。  </p>
</blockquote>
<blockquote>
<p>useradd创建普通用户时，不加任何和家目录相关的选项时，是否创建家目录是由/etc/login.defs中的CREATE_HOME变量控制的。  </p>
</blockquote>
<h5 id="批量创建用户newusers"><a href="#批量创建用户newusers" class="headerlink" title="批量创建用户newusers"></a>批量创建用户newusers</h5><blockquote>
<p>newusers用于批量创建或修改已有用户信息。在创建用户时，它会读取/etc/login.defs文件中的配置项。  </p>
</blockquote>
<blockquote>
<p>newusers [options] [file]  </p>
</blockquote>
<blockquote>
<p>newusers命令从file中或标准输入中读取要创建或修改用户的信息，文件中每行格式都一样，一行代表一个用户。格式如下：  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pw_name:pw_passwd:pw_uid:pw_gid:pw_gecos:pw_dir:pw_shell</span><br></pre></td></tr></table></figure>
<h6 id="各列的意义如下："><a href="#各列的意义如下：" class="headerlink" title="各列的意义如下："></a>各列的意义如下：</h6><blockquote>
<p>pw_name：用户名，若不存在则新创建，否则修改已存在用户的信息  </p>
<p>pw_passwd：用户密码，该项使用明文密码，在修改或创建用户时会按照指定的算法自动对其进行加密转换  </p>
<p>pw_uid：指定uid，留空则自动选择uid。如果该项为已存在的用户名，则使用该用户的uid，但不建议这么做，uid应尽量保证唯一性  </p>
<p>pw_gid：用户主组的gid或组名。若给定组不存在，则自动创建组。若留空，则创建同用户名的组，gid将自动选择  </p>
<p>pw_gecos：用户注释信息   </p>
<p>pw_dir：指定用户家目录，若不存在则自动创建。留空则不创建。<br>：注意，newusers命令不会递归创建父目录，父目录不存在时将会给出信息，但newusers命令仍会继续执行<br>：以完成创建剩下的用户，所以这些错误的用户家目录需要手动去创建。  </p>
<p>pw_shell：指定用户的默认shell  </p>
</blockquote>
<blockquote>
<p>newusers [options]  [file]  </p>
</blockquote>
<h6 id="选项说明："><a href="#选项说明：" class="headerlink" title="选项说明："></a>选项说明：</h6><blockquote>
<p>-c：指定加密方法，可选DES,MD5,NONE,SHA256和SHA512  </p>
</blockquote>
<blockquote>
<p>-r：创建一个系统用户<br>newusers首先尝试创建或修改所有指定的用户，然后将信息写入到user和group的文件中。如果尝试创建或修改用户过程中发生错误，则所有动作都将回滚，但如果在写入过程中发生错误，则写入成功的不会回滚，这将可能导致文件的不一致性。要检查用户、组文件的一致性，可以使用showdow-utils包提供的grpck和pwck命令。  </p>
</blockquote>
<h6 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; cat /tmp/userfile</span><br><span class="line">zhangsan:123456:2000:2000::/home/zhangsan:/bin/bash</span><br><span class="line">lisi:123456:::::/bin/bash</span><br><span class="line"></span><br><span class="line">shell&gt; newusers -c SHA512 /tmp/userfile   </span><br><span class="line"></span><br><span class="line">shell&gt; tail -2 /etc/passwd</span><br><span class="line">zhangsan:x:2000:2000::/home/zhangsan:/bin/bash</span><br><span class="line">lisi:x:2001:2001:::/bin/bash</span><br><span class="line"></span><br><span class="line">shell&gt; tail -2 /etc/shadow</span><br><span class="line">zhangsan:$6$aI1Mk/krF$xN0TFOIRibrb/mYngJ/sV3M7g4zOxqOh8CWyDlI0uwmr5qNTzsmwauRFvCpfLtvtiJYZ/5bil.XfJMNB.sqDY1:17323:0:99999:7:::</span><br><span class="line">lisi:$6$bngXo/V6wWW$.TlQCJtEm9krBX0Oiep/iahS59a/BwVYcSc8F9lAnMGF55K6W5YoUZ2nK6WkMta3p7sihkxHm/AuNrrJ6hqNn1:17323:0:99999:7:::</span><br></pre></td></tr></table></figure>
<h5 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h5><h6 id="创建一个新组。"><a href="#创建一个新组。" class="headerlink" title="创建一个新组。"></a>创建一个新组。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">groupadd [options] group  </span><br><span class="line">选项说明：  </span><br><span class="line">-f：如果要创建的组已经存在，默认会错误退出，使用该选项则强制创建且以正确状态退出，只不过gid可能会不受控制。</span><br><span class="line">-g：指定gid，默认gid必须唯一，除非使用了-o选项。</span><br><span class="line">-K：修改/etc/login.defs中关于组相关的配置项。配置方式为KEY=VALUE，例如-K GID_MIN=100 -K GID_MAX=499</span><br><span class="line">-o：允许创建一个非唯一gid的组</span><br><span class="line">-r：创建系统组</span><br></pre></td></tr></table></figure>
<h5 id="修改密码passwd"><a href="#修改密码passwd" class="headerlink" title="修改密码passwd"></a>修改密码passwd</h5><blockquote>
<p>修改密码的工具。默认passwd命令不允许为用户创建空密码。  </p>
</blockquote>
<blockquote>
<p>passwd修改密码前会通过pam认证用户，pam配置文件中与此相关的设置项如下：  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">passwd password requisite pam_cracklib.so retry=3</span><br><span class="line">passwd password required pam_unix.so use_authtok</span><br><span class="line">命令的用法如下：</span><br><span class="line">passwd options [username]</span><br><span class="line">选项说明：</span><br><span class="line">-l：锁定指定用户的密码，在/etc/shadow的密码列加上前缀&quot;!&quot;或&quot;!!&quot;。这种锁定不是完全锁定，使用ssh公钥还是能登录。要完全锁定，使用chage -E 0来设置帐户过期。</span><br><span class="line">-u：解锁-l锁定的密码，解锁的方式是将/etc/shadow的密码列的前缀&quot;!&quot;或&quot;!!&quot;移除掉。但不能移除只有&quot;!&quot;或&quot;!!&quot;的项。</span><br><span class="line">--stdin：从标准输入中读取密码</span><br><span class="line">-d：删除用户密码，将/etc/shadow的密码列设置为空</span><br><span class="line">-f：指定强制操作</span><br><span class="line">-e：强制密码过期，下次登录将强制要求修改密码</span><br><span class="line">-n：密码最小使用天数</span><br><span class="line">-x：最大密码使用天数</span><br><span class="line">-w：过期前几天开始提示用户密码将要过期</span><br><span class="line">-i：设置密码过期后多少天，用户才过期。用户过期将被禁用，修改密码也无法登陆。</span><br></pre></td></tr></table></figure>
<h5 id="批量修改密码chpasswd"><a href="#批量修改密码chpasswd" class="headerlink" title="批量修改密码chpasswd"></a>批量修改密码chpasswd</h5><blockquote>
<p>以批处理模式从标准输入中获取提供的用户和密码来修改用户密码，可以一次修改多个用户密码。也就是说不用交互。适用于一次性创建了多个用户时为他们提供密码。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chpasswd [-e -c] &quot;user:passwd&quot;</span><br><span class="line">-c：指定加密算法，可选的算法有DES,MD5,NONE,SHA256和SHA512</span><br><span class="line">user:passwd为用户密码对，其中默认passwd是明文密码，可以指定多对，每行一个用户密码对。前提是用户是已存在的。</span><br><span class="line">-e：passwd默认使用的是明文密码，如果要使用密文，则使用-e选项。参见man chpasswd</span><br></pre></td></tr></table></figure>
<blockquote>
<p>chpasswd会读取/etc/login.defs中的相关配置，修改成功后会将密码信息写入到密码文件中。  </p>
</blockquote>
<blockquote>
<p>该命令的修改密码的处理方式是先在内存中修改，如果所有用户的密码都能设置成功，然后才写入到磁盘密码文件中。在内存中修改过程中出错，则所有修改都回滚，但若在写入密码文件过程中出错，则成功的不会回滚。  </p>
</blockquote>
<h6 id="示例：-2"><a href="#示例：-2" class="headerlink" title="示例："></a>示例：</h6><h6 id="修改单个用户密码。"><a href="#修改单个用户密码。" class="headerlink" title="修改单个用户密码。"></a>修改单个用户密码。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; echo &quot;user1:123456&quot; | chpasswd -c SHA512</span><br></pre></td></tr></table></figure>
<h6 id="修改多个用户密码，则提供的每个用户对都要分行。"><a href="#修改多个用户密码，则提供的每个用户对都要分行。" class="headerlink" title="修改多个用户密码，则提供的每个用户对都要分行。"></a>修改多个用户密码，则提供的每个用户对都要分行。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; echo  -e &apos;usertest:123456\nusertest2:123456&apos; | chpasswd</span><br></pre></td></tr></table></figure>
<h6 id="更方便的是写入到文件中，每行一个用户密码对。"><a href="#更方便的是写入到文件中，每行一个用户密码对。" class="headerlink" title="更方便的是写入到文件中，每行一个用户密码对。"></a>更方便的是写入到文件中，每行一个用户密码对。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; cat /tmp/passwdfile</span><br><span class="line">zhangsan:123456</span><br><span class="line">lisi:123456</span><br><span class="line"></span><br><span class="line">shell&gt; chapasswd -c SHA512 &lt;/tmp/passwdfile</span><br></pre></td></tr></table></figure>
<h5 id="chage"><a href="#chage" class="headerlink" title="chage"></a>chage</h5><blockquote>
<p>chage命令主要修改或查看和密码时间相关的内容。具体的看man文档，可能用到的两个选项如下：  </p>
</blockquote>
<blockquote>
<p>-l：列出指定用户密码相关信息  </p>
</blockquote>
<blockquote>
<p>-E：指定帐户(不是密码)过期时间，所以是强锁定，如果指定为0，则立即过期，即直接锁定该用户  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@server2 ~]#  chage -l zhangsan</span><br><span class="line">Last password change                                    : Jun 06, 2017</span><br><span class="line">Password expires                                        : never</span><br><span class="line">Password inactive                                       : never</span><br><span class="line">Account expires                                         : never</span><br><span class="line">Minimum number of days between password change          : 0</span><br><span class="line">Maximum number of days between password change          : 99999</span><br><span class="line">Number of days of warning before password expires       : 7</span><br><span class="line"></span><br><span class="line">[root@server2 ~]# chage -E 0 zhangsan</span><br><span class="line"></span><br><span class="line">[root@server2 ~]# chage -l zhangsan </span><br><span class="line">Last password change                                    : Jun 06, 2017</span><br><span class="line">Password expires                                        : never</span><br><span class="line">Password inactive                                       : never</span><br><span class="line">Account expires                                         : Jan 01, 1970</span><br><span class="line">Minimum number of days between password change          : 0</span><br><span class="line">Maximum number of days between password change          : 99999</span><br><span class="line">Number of days of warning before password expires       : 7</span><br></pre></td></tr></table></figure>
<h5 id="删除用户和组"><a href="#删除用户和组" class="headerlink" title="删除用户和组"></a>删除用户和组</h5><h6 id="userdel命令用于删除用户。"><a href="#userdel命令用于删除用户。" class="headerlink" title="userdel命令用于删除用户。"></a>userdel命令用于删除用户。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userdel [options] login_name</span><br><span class="line">-r：递归删除家目录，默认不删除家目录。</span><br><span class="line">-f：强制删除用户，即使这个用户正处于登录状态。同时也会强制删除家目录。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>一般不直接删除家目录，即不用-r，可以vim /etc/passwd，将不需要的用户直接注释掉。  </p>
</blockquote>
<blockquote>
<p>groupdel命令删除组。如果要删除的组是某用户的主组，需要先删除主组中的用户。  </p>
</blockquote>
<h5 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h5><blockquote>
<p>修改帐户属性信息。必须要确保在执行该命令的时候，待修改的用户没有在执行进程。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">usermod [options] login</span><br><span class="line">选项说明：</span><br><span class="line">-l：修改用户名，仅仅只是改用户名，其他的一切都不会改动(uid、家目录等)</span><br><span class="line">-u：新的uid，新的uid必须唯一，除非同时使用了-o选项</span><br><span class="line">-g：修改用户主组，可以是以gid或组名。对于那些以旧组为所属组的文件(除原家目录)，需要重新手动修改其所属组</span><br><span class="line">-m：移动家目录内容到新的位置，该选项只在和-d选项一起使用时才生效</span><br><span class="line">-d：修改用户的家目录位置，若不存在则自动创建。默认旧的家目录不会删除</span><br><span class="line">    如果同时指定了-m选项，则旧的家目录中的内容会移到新家目录</span><br><span class="line">    如果当前用户家目录不存在或没有家目录，则也不会创建新的家目录</span><br><span class="line">-o：允许用户使用非唯一的UID</span><br><span class="line">-s：修改用的shell，留空则选择默认shell</span><br><span class="line">-c：修改用户注释信息</span><br><span class="line"></span><br><span class="line">-a：将用户以追加的方式加入到辅助组中，只能和-G选项一起使用</span><br><span class="line">-G：将用户加入指定的辅助组中，若此处未列出某组，而此前该用户又是该组成员，则会删除该组中此成员</span><br><span class="line"></span><br><span class="line">-L：锁定用户的密码，将在/etc/shadow的密码列加上前缀&quot;!&quot;或&quot;!!&quot;</span><br><span class="line">-U：解锁用户的密码，解锁的方式是移除shadow文件密码列的前缀&quot;!&quot;或&quot;!!&quot;</span><br><span class="line">-e：帐户过期时间，时间格式为&quot;YYYY-MM-DD&quot;，如果给一个空的参数，则立即禁用该帐户</span><br><span class="line">-f：密码过期后多少天，帐户才过期被禁用，0表示密码过期帐户立即禁用，-1表示禁用该功能</span><br></pre></td></tr></table></figure>
<blockquote>
<p>同样，还有groupmod修改组信息，用法非常简单，几乎也用不上，不多说了。  </p>
</blockquote>
<h5 id="vipw和vigr"><a href="#vipw和vigr" class="headerlink" title="vipw和vigr"></a>vipw和vigr</h5><blockquote>
<p>vipw和vigr是编辑用户和组文件的工具，vipw可以修改/etc/passwd和/etc/shadow，vigr可以修改/etc/group和/etc/gshadow，用这两个工具比较安全，在修改的时候会检查文件的一致性。  </p>
</blockquote>
<blockquote>
<p>删除用户出错时，提示用户正在被进程占用。可以使用vi编辑/etc/paswd和/etc/shadow文件将该用户对应的行删除掉。也可以使用vipw和vipw -s来分别编辑/etc/paswd和/etc/shadow文件。它们的作用是一样的。  </p>
</blockquote>
<h5 id="手动创建用户"><a href="#手动创建用户" class="headerlink" title="手动创建用户"></a>手动创建用户</h5><blockquote>
<p>手动创建用户的全过程：需要管理员权限。  </p>
</blockquote>
<blockquote>
<p>在/etc/group中添加用户所属组的相关信息。如果用户还有辅助组则在对应组中加入该用户作为成员。<br>在/etc/passwd和/etc/shadow中添加用户相关信息。此时指定的家目录还不存在，密码不存在，所以/etc/shadow的密码位使用”!!”代替。<br>创建家目录，并复制骨架目录中的文件到家目录中。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; mkdir /home/user_name</span><br><span class="line">shell&gt; cp -r /etc/skel /home/user_name。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改家目录及子目录的所有者和属组。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; chown -R user_name:user_name /home/user_name</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改家目录及子目录的权限。例如设置组和其他用户无任何权限但所有者有。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; chmod -R 700 /home/user_name</span><br></pre></td></tr></table></figure>
<blockquote>
<p>到此为止，用户已经创建完成了，只是没有密码，所以只能su，不能登录。  </p>
</blockquote>
<blockquote>
<p>生成密码。<br>使用openssl passwd生成密码。但openssl passwd生成的密码只能是MD5算法的，很容易被破解  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; openssl passwd -1 -salt &apos;123456&apos;  # 生成使用md5算法的密码，然后将生成的密码复制到/etc/shadow对应用户的密码位。其中-1是指md5，-salt &apos;12345678&apos;是使用8位的字符创建密码的杂项。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>直接使用passwd命令创建密码  </p>
</blockquote>
<blockquote>
<p>测试手动创建的用户是否可以正确登录。  </p>
</blockquote>
<blockquote>
<p>以下是全过程。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; mkdir /tmp/12;cp /etc/group /etc/passwd /etc/shadow /tmp/12/    # 备份这些文件</span><br><span class="line">shell&gt; echo &quot;userX:x:666&quot; &gt;&gt; /etc/group</span><br><span class="line">shell&gt; echo &quot;userX:x:666:666::/home/userX:/bin/bash&quot; &gt;&gt; /etc/passwd</span><br><span class="line">shell&gt; echo &apos;userX:!!:17121:0:99999::::&apos; &gt;&gt; /etc/shadow</span><br><span class="line">shell&gt; cp -r /etc/skel /home/userX</span><br><span class="line">shell&gt; chown -R userX:userX /home/userX</span><br><span class="line">shell&gt; chmod -R go= /home/userX</span><br><span class="line">shell&gt; passwd --stdin userX &lt;&lt;&lt; &apos;123456&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>测试使用userX是否可以登录。  </p>
</blockquote>
<blockquote>
<p>如果是使用openssl passwd创建的密码。那么使用下面的方法将这部分密码替换到/etc/shadow中。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; field=$(tail -1 /etc/shadow | cut -d&quot;:&quot; -f2)</span><br><span class="line">shell&gt; password=$(openssl passwd -1 -salt &apos;abcdefg&apos; 123456)</span><br><span class="line">shell&gt; sed -i &apos;$s%&apos;$field&apos;%&apos;$password&apos;%&apos; /etc/shadow</span><br></pre></td></tr></table></figure>
<h4 id="其他用户相关命令"><a href="#其他用户相关命令" class="headerlink" title="其他用户相关命令"></a>其他用户相关命令</h4><h5 id="finger查看用户信息"><a href="#finger查看用户信息" class="headerlink" title="finger查看用户信息"></a>finger查看用户信息</h5><blockquote>
<p>从CentOS 6版本开始就没有该命令了，要先安装。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum -y install finger</span><br><span class="line"></span><br><span class="line">shell&gt; useradd zhangsan</span><br><span class="line"></span><br><span class="line">shell&gt; finger zhangsan</span><br><span class="line">Login: zhangsan                           Name:</span><br><span class="line">Directory: /home/zhangsan                 Shell: /bin/bash</span><br><span class="line">Never logged in.</span><br><span class="line">No mail.</span><br><span class="line">No Plan.</span><br></pre></td></tr></table></figure>
<h5 id="id"><a href="#id" class="headerlink" title="id"></a>id</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">id username</span><br><span class="line">-u：得到uid</span><br><span class="line">-n：得到用户名而不是uid</span><br><span class="line">-z：无任何空白字符输出模式，不能在默认的格式下使用。</span><br></pre></td></tr></table></figure>
<h5 id="示例：-3"><a href="#示例：-3" class="headerlink" title="示例："></a>示例：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; id root</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br><span class="line"></span><br><span class="line">shell&gt; id wangwu</span><br><span class="line">uid=500(wangwu) gid=500(wangwu) groups=500(wangwu)</span><br><span class="line"></span><br><span class="line">shell&gt; id -u wangwu</span><br><span class="line">500</span><br><span class="line"></span><br><span class="line">shell&gt; id -u -z wangwu</span><br><span class="line">2002[root@server2 ~]#</span><br></pre></td></tr></table></figure>
<h5 id="users"><a href="#users" class="headerlink" title="users"></a>users</h5><blockquote>
<p>查看当前正在登陆的用户名。  </p>
</blockquote>
<h5 id="last"><a href="#last" class="headerlink" title="last"></a>last</h5><blockquote>
<p>查看最近登录的用户列表，其实last查看的是/var/log/wtmp文件。  </p>
</blockquote>
<blockquote>
<p>-n 显示行数：列出最近几次登录的用户  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@xuexi ~]# last -4</span><br><span class="line">root     pts/0        192.168.100.1    Wed Mar 30 15:16   still logged in  </span><br><span class="line">root     pts/1        192.168.100.1    Wed Mar 30 14:21 - 14:21  (00:00)   </span><br><span class="line">root     pts/1        192.168.100.1    Wed Mar 30 14:04 - 14:10  (00:06)   </span><br><span class="line">root     pts/0        192.168.100.1    Wed Mar 30 13:12 - 15:16  (02:04)   </span><br><span class="line"> </span><br><span class="line">wtmp begins Thu Feb 18 20:59:39 2016</span><br></pre></td></tr></table></figure>
<h5 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h5><blockquote>
<p>查看谁尝试登陆过但没有登录成功的。即能够审核和查看谁曾经不断的登录，可能那就是黑客。  </p>
</blockquote>
<blockquote>
<p>-n:只列出最近的n个尝试对象。  </p>
</blockquote>
<h5 id="who和w"><a href="#who和w" class="headerlink" title="who和w"></a>who和w</h5><blockquote>
<p>都是查看谁登录过，并干了什么事  </p>
</blockquote>
<blockquote>
<p>w查看的信息比who多。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; who</span><br><span class="line">root     tty1         2017-06-07 00:49</span><br><span class="line">root     pts/0        2017-06-07 02:06 (192.168.100.1)</span><br><span class="line"></span><br><span class="line">shell&gt; w</span><br><span class="line">08:26:38 up 18:48,  2 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     tty1                      00:49    7:36m  0.24s  0.24s -bash</span><br><span class="line">root     pts/0    192.168.100.1    02:06    6.00s  0.97s  0.02s w</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中w的第一行，分别表示当前时间，已开机时长，当前在线用户，过去1、5、15分钟的平均负载率。这一行和uptime命令获取的信息是完全一致的。  </p>
</blockquote>
<h5 id="lastlog"><a href="#lastlog" class="headerlink" title="lastlog"></a>lastlog</h5><blockquote>
<p>可以查看登录的来源IP  </p>
</blockquote>
<blockquote>
<p>-u 指定查看用户  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; lastlog|head -n 10</span><br><span class="line">Username         Port     From             Latest</span><br><span class="line">root             pts/0    192.168.100.1    Wed Mar 30 15:16:25 +0800 2016</span><br><span class="line">bin                                        **Never logged in**</span><br><span class="line">daemon                                     **Never logged in**</span><br><span class="line">adm                                        **Never logged in**</span><br><span class="line">lp                                         **Never logged in**</span><br><span class="line">sync                                       **Never logged in**</span><br><span class="line">shutdown                                   **Never logged in**</span><br><span class="line">halt                                       **Never logged in**</span><br><span class="line">mail                                       **Never logged in**</span><br></pre></td></tr></table></figure>

    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>原文作者: <a href="http://yoursite.com">John Doe</a>
            <p>原文链接: <a href="http://yoursite.com/2017/03/08/LINUX系统中用户、组管理/">http://yoursite.com/2017/03/08/LINUX系统中用户、组管理/</a>
            <p>发表日期: <a href="http://yoursite.com/2017/03/08/LINUX系统中用户、组管理/">March 8th 2017, 12:00:00 am</a>
            <p>版权声明: 本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2017/03/12/Linux 文件权限管理/" title= Linux 文件权限管理 >
                    <div class="nextTitle">Linux 文件权限管理</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/2017/02/28/搭建DNS服务器，实现主DNS服务器，负责解析一个域/" title= 搭建DNS服务器，实现主DNS服务器，负责解析一个域 >
                    <div class="prevTitle">搭建DNS服务器，实现主DNS服务器，负责解析一个域</div>
                </a>
            
        </li>
    </ul>
    <!-- 评论插件 -->
    <!-- 来必力City版安装代码 -->

<!-- City版安装代码已完成 -->
    
    
    <!--PC和WAP自适应版-->

    <!--PC版-->


    
    

    <!-- 评论 -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:1020846215@qq.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/fi3ework" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                  
                  <img class="profile-qr" src="/assets/example_qr.png" />
                </span>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- 不蒜子  -->
    
    <div class="busuanzi-container">
    
     
    <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
    
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#用户和组的基本概念"><span class="toc-number">1.</span> <span class="toc-text">用户和组的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#在Linux中，用户分为3类："><span class="toc-number">1.0.1.</span> <span class="toc-text">在Linux中，用户分为3类：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用户和组管理相关的文件"><span class="toc-number">2.</span> <span class="toc-text">用户和组管理相关的文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#用户文件-etc-passwd"><span class="toc-number">2.1.</span> <span class="toc-text">用户文件/etc/passwd</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#etc-passwd文件里记录的是操作系统中用户的信息，这里面记录了几行就表示系统中有几个系统用户。它的格式大致如下："><span class="toc-number">2.1.1.</span> <span class="toc-text">/etc/passwd文件里记录的是操作系统中用户的信息，这里面记录了几行就表示系统中有几个系统用户。它的格式大致如下：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#密码文件-etc-shadow"><span class="toc-number">2.2.</span> <span class="toc-text">密码文件/etc/shadow</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#该文件的格式大致如下："><span class="toc-number">2.2.1.</span> <span class="toc-text">该文件的格式大致如下：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#每一行表示一个用户密码的属性，有8个冒号共9列属性。"><span class="toc-number">2.2.2.</span> <span class="toc-text">每一行表示一个用户密码的属性，有8个冒号共9列属性。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#组文件-etc-group和-etc-gshadow"><span class="toc-number">2.3.</span> <span class="toc-text">组文件/etc/group和/etc/gshadow</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#骨架目录-etc-skel"><span class="toc-number">2.4.</span> <span class="toc-text">骨架目录/etc/skel</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#etc-login-defs"><span class="toc-number">2.5.</span> <span class="toc-text">/etc/login.defs</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#注意，-etc-login-defs中的设置控制的是shadow-utils包中的组件，也就是说，该组件中的工具执行操作时会读取该文件中的配置。该组件中包含下面的程序："><span class="toc-number">2.5.1.</span> <span class="toc-text">注意，/etc/login.defs中的设置控制的是shadow-utils包中的组件，也就是说，该组件中的工具执行操作时会读取该文件中的配置。该组件中包含下面的程序：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#etc-default-useradd"><span class="toc-number">2.6.</span> <span class="toc-text">/etc/default/useradd</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用户和组管理命令"><span class="toc-number">3.</span> <span class="toc-text">用户和组管理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#useradd和adduser"><span class="toc-number">3.1.</span> <span class="toc-text">useradd和adduser</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#adduser是useradd的一个软链接。"><span class="toc-number">3.1.1.</span> <span class="toc-text">adduser是useradd的一个软链接。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#示例："><span class="toc-number">3.1.2.</span> <span class="toc-text">示例：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#批量创建用户newusers"><span class="toc-number">3.2.</span> <span class="toc-text">批量创建用户newusers</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#各列的意义如下："><span class="toc-number">3.2.1.</span> <span class="toc-text">各列的意义如下：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#选项说明："><span class="toc-number">3.2.2.</span> <span class="toc-text">选项说明：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#示例：-1"><span class="toc-number">3.2.3.</span> <span class="toc-text">示例：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#groupadd"><span class="toc-number">3.3.</span> <span class="toc-text">groupadd</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#创建一个新组。"><span class="toc-number">3.3.1.</span> <span class="toc-text">创建一个新组。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#修改密码passwd"><span class="toc-number">3.4.</span> <span class="toc-text">修改密码passwd</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#批量修改密码chpasswd"><span class="toc-number">3.5.</span> <span class="toc-text">批量修改密码chpasswd</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#示例：-2"><span class="toc-number">3.5.1.</span> <span class="toc-text">示例：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#修改单个用户密码。"><span class="toc-number">3.5.2.</span> <span class="toc-text">修改单个用户密码。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#修改多个用户密码，则提供的每个用户对都要分行。"><span class="toc-number">3.5.3.</span> <span class="toc-text">修改多个用户密码，则提供的每个用户对都要分行。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#更方便的是写入到文件中，每行一个用户密码对。"><span class="toc-number">3.5.4.</span> <span class="toc-text">更方便的是写入到文件中，每行一个用户密码对。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#chage"><span class="toc-number">3.6.</span> <span class="toc-text">chage</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除用户和组"><span class="toc-number">3.7.</span> <span class="toc-text">删除用户和组</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#userdel命令用于删除用户。"><span class="toc-number">3.7.1.</span> <span class="toc-text">userdel命令用于删除用户。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#usermod"><span class="toc-number">3.8.</span> <span class="toc-text">usermod</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vipw和vigr"><span class="toc-number">3.9.</span> <span class="toc-text">vipw和vigr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#手动创建用户"><span class="toc-number">3.10.</span> <span class="toc-text">手动创建用户</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他用户相关命令"><span class="toc-number">4.</span> <span class="toc-text">其他用户相关命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#finger查看用户信息"><span class="toc-number">4.1.</span> <span class="toc-text">finger查看用户信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#id"><span class="toc-number">4.2.</span> <span class="toc-text">id</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#示例：-3"><span class="toc-number">4.3.</span> <span class="toc-text">示例：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#users"><span class="toc-number">4.4.</span> <span class="toc-text">users</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#last"><span class="toc-number">4.5.</span> <span class="toc-text">last</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lastb"><span class="toc-number">4.6.</span> <span class="toc-text">lastb</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#who和w"><span class="toc-number">4.7.</span> <span class="toc-text">who和w</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lastlog"><span class="toc-number">4.8.</span> <span class="toc-text">lastlog</span></a></li></ol></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- 在ejs中将archive按照时间排序 -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 32
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2018 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/09</span><a class="archive-post-title" href= "/2018/08/09/Linux 防火墙各种规则实战应用/" >[Untitled Post]</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/09</span><a class="archive-post-title" href= "/2018/08/09/Nginx 详细介绍/" >[Untitled Post]</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2017 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/15</span><a class="archive-post-title" href= "/2017/10/15/memcache  缓存原理介绍/" >memcache  缓存原理介绍</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/08</span><a class="archive-post-title" href= "/2017/10/08/tomcat 各种架构实验演示/" >tomcat 各种架构实验演示</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/25</span><a class="archive-post-title" href= "/2017/09/25/Varnish 缓存服务器介绍/" >Varnish 缓存服务器介绍</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/14</span><a class="archive-post-title" href= "/2017/09/14/keepalived 各种高可用实战演练/" >keepalived 各种高可用实战演练</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/28</span><a class="archive-post-title" href= "/2017/08/28/HAproxy 原理介绍/" >HAproxy 原理介绍</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/19</span><a class="archive-post-title" href= "/2017/08/19/lvs 详细介绍/" >lvs 详细介绍</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/24</span><a class="archive-post-title" href= "/2017/06/24/各种网络共享服务实验演示/" >各种网络共享服务实验演示</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/11</span><a class="archive-post-title" href= "/2017/06/11/LAMP 架构的各种演示/" >LAMP 架构的各种演示</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/01</span><a class="archive-post-title" href= "/2017/06/01/介绍 MYSQL的事务日志/" >介绍 MYSQL的事务日志</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/22</span><a class="archive-post-title" href= "/2017/05/22/MYSQL 数据库的日志介绍/" >MYSQL 数据库的日志介绍</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/15</span><a class="archive-post-title" href= "/2017/05/15/MYSQL MariaDB 的事务和事务隔离级别/" >MYSQL MariaDB 的事务和事务隔离级别</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/08</span><a class="archive-post-title" href= "/2017/05/08/MASQL MariaDB 用户权限管理/" >MASQL MariaDB 用户权限管理</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/20</span><a class="archive-post-title" href= "/2017/04/20/ext 文件系统机制原理/" >ext 文件系统机制原理</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/15</span><a class="archive-post-title" href= "/2017/04/15/Linux分区信息与管理文件系统/" >Linux分区信息与管理文件系统</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/10</span><a class="archive-post-title" href= "/2017/04/10/DHCP 服务/" >DHCP服务</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/01</span><a class="archive-post-title" href= "/2017/04/01/Linux系统中su 和 sudo 的用法/" >Linux系统中su 和 sudo 的用法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/20</span><a class="archive-post-title" href= "/2017/03/20/搭建DNS互联网架构服务器(一）/" >搭建DNS互联网架构服务器</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/15</span><a class="archive-post-title" href= "/2017/03/15/搭建DNS 服务，实现主服务器，邮件服务器，泛域名解析，反向解析等/" >搭建DNS 服务，实现主服务器，邮件服务器，泛域名解析，反向解析等</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/12</span><a class="archive-post-title" href= "/2017/03/12/Linux 文件权限管理/" >Linux 文件权限管理</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/08</span><a class="archive-post-title" href= "/2017/03/08/LINUX系统中用户、组管理/" >安装管理包：LINUX系统中用户、组管理</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/28</span><a class="archive-post-title" href= "/2017/02/28/搭建DNS服务器，实现主DNS服务器，负责解析一个域/" >搭建DNS服务器，实现主DNS服务器，负责解析一个域</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/15</span><a class="archive-post-title" href= "/2017/02/15/DNS 服务从基础到深入/" >DNS 服务从基础到深入</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/08/09/Nginx 各种实验演示/" >[Untitled Post]</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2017 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/10</span><a class="archive-post-title" href= "/2017/02/10/SSH端口转发实验/" >SSH端口转发实验</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/01</span><a class="archive-post-title" href= "/2017/02/01/rpm管理包 和 yum管理包(1)/" >安装管理包：rpm包和yum包</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/20</span><a class="archive-post-title" href= "/2017/01/20/搭建CA/" >如何搭建CA（向CA申请证书）</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2016 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/20</span><a class="archive-post-title" href= "/2016/12/20/进程管理和计划任务的知识点()/" >进程管理与计划任务的知识点</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/08</span><a class="archive-post-title" href= "/2016/12/08/TCP、IP协议三次握手与四次握手流程解析（）/" >TCP、IP协议三次握手与四次握手流程解析</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/29</span><a class="archive-post-title" href= "/2016/11/29/Linux 的一些基础练习题/" >Linux 的一些基础练习题</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/23</span><a class="archive-post-title" href= "/2016/11/23/对正则表达式，VIM编辑器命令的基本操作（三）/" >对正则表达式，VIM编辑器命令的基本操作</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="Linux"><span class="iconfont-archer">&#xe606;</span>Linux</span>
    
        <span class="sidebar-tag-name" data-tags="用户组"><span class="iconfont-archer">&#xe606;</span>用户组</span>
    
        <span class="sidebar-tag-name" data-tags="DHCP"><span class="iconfont-archer">&#xe606;</span>DHCP</span>
    
        <span class="sidebar-tag-name" data-tags="LAMP"><span class="iconfont-archer">&#xe606;</span>LAMP</span>
    
        <span class="sidebar-tag-name" data-tags="haproxy"><span class="iconfont-archer">&#xe606;</span>haproxy</span>
    
        <span class="sidebar-tag-name" data-tags="练习题"><span class="iconfont-archer">&#xe606;</span>练习题</span>
    
        <span class="sidebar-tag-name" data-tags="权限管理"><span class="iconfont-archer">&#xe606;</span>权限管理</span>
    
        <span class="sidebar-tag-name" data-tags="su和sudo"><span class="iconfont-archer">&#xe606;</span>su和sudo</span>
    
        <span class="sidebar-tag-name" data-tags="文件系统"><span class="iconfont-archer">&#xe606;</span>文件系统</span>
    
        <span class="sidebar-tag-name" data-tags="MYSQL"><span class="iconfont-archer">&#xe606;</span>MYSQL</span>
    
        <span class="sidebar-tag-name" data-tags="TCP/IP"><span class="iconfont-archer">&#xe606;</span>TCP/IP</span>
    
        <span class="sidebar-tag-name" data-tags="SSH"><span class="iconfont-archer">&#xe606;</span>SSH</span>
    
        <span class="sidebar-tag-name" data-tags="varnish"><span class="iconfont-archer">&#xe606;</span>varnish</span>
    
        <span class="sidebar-tag-name" data-tags="lvs"><span class="iconfont-archer">&#xe606;</span>lvs</span>
    
        <span class="sidebar-tag-name" data-tags="memcache"><span class="iconfont-archer">&#xe606;</span>memcache</span>
    
        <span class="sidebar-tag-name" data-tags="tomcat"><span class="iconfont-archer">&#xe606;</span>tomcat</span>
    
        <span class="sidebar-tag-name" data-tags="基本命令"><span class="iconfont-archer">&#xe606;</span>基本命令</span>
    
        <span class="sidebar-tag-name" data-tags="keepalied"><span class="iconfont-archer">&#xe606;</span>keepalied</span>
    
        <span class="sidebar-tag-name" data-tags="rpm"><span class="iconfont-archer">&#xe606;</span>rpm</span>
    
        <span class="sidebar-tag-name" data-tags="CA"><span class="iconfont-archer">&#xe606;</span>CA</span>
    
        <span class="sidebar-tag-name" data-tags="dns"><span class="iconfont-archer">&#xe606;</span>dns</span>
    
        <span class="sidebar-tag-name" data-tags="DNS"><span class="iconfont-archer">&#xe606;</span>DNS</span>
    
        <span class="sidebar-tag-name" data-tags="进程管理、计划任务"><span class="iconfont-archer">&#xe606;</span>进程管理、计划任务</span>
    
        <span class="sidebar-tag-name" data-tags="共享服务"><span class="iconfont-archer">&#xe606;</span>共享服务</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    缺失模块。<br/>
    1、请确保node版本大于6.2<br/>
    2、在博客根目录（注意不是archer根目录）执行以下命令：<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3、在根目录_config.yml里添加配置：
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "John Doe"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
    <!-- busuanzi  -->
    
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
    </body>
</html>


