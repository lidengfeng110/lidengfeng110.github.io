<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>实现DNS服务主从复制 | Hexo</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">实现DNS服务主从复制</h1><a id="logo" href="/.">Hexo</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">实现DNS服务主从复制</h1><div class="post-meta"><a href="/2017/03/22/实现DNS服务主从复制/#comments" class="comment-count"></a><p><span class="date">Mar 22, 2017</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Schlägt</i></i></span></p></div><div class="post-content"><blockquote>
<p> 现在我们来实现主从复制，用两台主机做服务器，比如，用192.168.30.7 来做主服务器，用192.168.30.17 来做从服务器。现在我们把两个服务器都搭建起来。  </p>
</blockquote>
<blockquote>
<p> 先搭建从服务器， 第一步，首先要装包     </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bind</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  然后来修改主配置文件  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/named.conf</span><br><span class="line">   </span><br><span class="line"> 要把 options 中的的这两行都注释掉。  </span><br><span class="line"> #listen-on port 53 &#123; locklhost; &#125;;      </span><br><span class="line">#allow-query     &#123; localhost;any; &#125;;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<blockquote>
<p>接下来在配置文件 /etc/named.rfc1912.zones<br>文件中添加区域信息  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;magedu.com&quot;   IN  &#123;</span><br><span class="line"> 		type slave;</span><br><span class="line">  masters &#123; 192.168.30.7; &#125;;</span><br><span class="line">                file &quot;slaves/magedu.com.zone.slave&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么配置文件中的数据库文件在slaves 这个目录下，因为在系统中自带就有这个目录 /var/named/slaves/  </p>
<p>还有就是数据库文件不用自己创建，它会自动同步主服务器生成。  </p>
</blockquote>
<h6 id="然后启动服务-systemctl-start-named"><a href="#然后启动服务-systemctl-start-named" class="headerlink" title="然后启动服务      systemctl start named"></a>然后启动服务      systemctl start named</h6><blockquote>
<p>启动后可以查看 /var/named/slaves/ 这个目录下会生成相应的文件，但是这个文件是加密的，不能直接看。  </p>
<p>有一个命令可以查看这个文件的基本信息  </p>
</blockquote>
<pre><code>named-compilezone -f raw -o -zone magedu.com      /var/named/slaves/magedu.com.zone.slave
</code></pre><h6 id="这样从服务器就搭建完成，现在回到主服务器上。"><a href="#这样从服务器就搭建完成，现在回到主服务器上。" class="headerlink" title="这样从服务器就搭建完成，现在回到主服务器上。"></a>这样从服务器就搭建完成，现在回到主服务器上。</h6><blockquote>
<p> 如果在主服务器上添加一个外部服务，然后重启服务，试问从服务器会及时更新吗？ 不会<br>       因为主服务器上的数据库文件中的 NS 没有记录从服务器的信息，所以主服务器不知道有从服务器，所以不会推送更改的内容。<br>       那么要想在主服务器修改内容后并增加序列号的情况下把更改的内容推送给从服务器，就必须在主服务器的数据库文件中的 NS 记录中添加从服务器信息。</p>
</blockquote>
<p>  如下   ： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$TTL     1D  </span><br><span class="line">@       IN       SOA   dns1.magedu.com.    admin.magedu.com.   (110 1D 1H 3D 1H )  </span><br><span class="line">                       NS     dns1.magedu.com.  </span><br><span class="line">  NS      dns2.magedu.com.  </span><br><span class="line">dns1      A       192.168.30.7  </span><br><span class="line">dns2       A        192.168.30.17  </span><br><span class="line">websrv    A       192.168.30.17  </span><br><span class="line">websrv     A        192.168.30.27  </span><br><span class="line">www       CNAME      websrv</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 然后重新加载一下     rndc  reload<br>然后回到从服务器上  查看下 /var.named/slaves/  </p>
<p>这个目录，就可以发现这个文件的时间刚发生改变，所以说明同步成功。</p>
</blockquote>
<h6 id="这是一台主服务器跟一个从服务器同步，理论上一般都是一个主服务器两个从服务器，接下来在搭一个从服务器。刚才是从服务器从主服务器那去同步，现在有个问题，能不能从服务器从从服务器上同步呢。"><a href="#这是一台主服务器跟一个从服务器同步，理论上一般都是一个主服务器两个从服务器，接下来在搭一个从服务器。刚才是从服务器从主服务器那去同步，现在有个问题，能不能从服务器从从服务器上同步呢。" class="headerlink" title="这是一台主服务器跟一个从服务器同步，理论上一般都是一个主服务器两个从服务器，接下来在搭一个从服务器。刚才是从服务器从主服务器那去同步，现在有个问题，能不能从服务器从从服务器上同步呢。"></a>这是一台主服务器跟一个从服务器同步，理论上一般都是一个主服务器两个从服务器，接下来在搭一个从服务器。刚才是从服务器从主服务器那去同步，现在有个问题，能不能从服务器从从服务器上同步呢。</h6><h6 id="接下来搭建第二个从服务器，以192-168-30-27这台主机来做第二台从服务器-。"><a href="#接下来搭建第二个从服务器，以192-168-30-27这台主机来做第二台从服务器-。" class="headerlink" title="接下来搭建第二个从服务器，以192.168.30.27这台主机来做第二台从服务器    。"></a>接下来搭建第二个从服务器，以192.168.30.27这台主机来做第二台从服务器    。</h6><h6 id="先装包-yum-install-bind"><a href="#先装包-yum-install-bind" class="headerlink" title="先装包            yum install bind"></a>先装包            yum install bind</h6><blockquote>
<p>然后修改主配置文件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/named.conf</span><br><span class="line">   </span><br><span class="line"> 要把 options 中的的这两行都注释掉。  </span><br><span class="line"> #listen-on port 53 &#123; locklhost; &#125;;      </span><br><span class="line">#allow-query     &#123; localhost;any; &#125;;</span><br></pre></td></tr></table></figure>
<p> 接下来修改配置文件 /etc/named.rfc1912.zones   ,在里面添加从服务器的区域信息  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;magedu.com&quot;   IN  &#123;</span><br><span class="line"> 		type slave;</span><br><span class="line">  masters &#123; 192.168.30.17; &#125;;</span><br><span class="line">                file &quot;slaves/magedu.com.zone.slave.slave&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>######<br>然后启动服务          systemctl restart named  </p>
<h6 id="启动后查看下-var-named-slaves-目录下生成文件没，如果生成说明同步成功。"><a href="#启动后查看下-var-named-slaves-目录下生成文件没，如果生成说明同步成功。" class="headerlink" title="启动后查看下 /var/named/slaves/ 目录下生成文件没，如果生成说明同步成功。"></a>启动后查看下 /var/named/slaves/ 目录下生成文件没，如果生成说明同步成功。</h6><blockquote>
<p>但是建议一般都从主服务器上同步。</p>
</blockquote>
<blockquote>
<p> 现在有个问题了，配置第二个从服务器时是没有经过主服务器的允许，但是却配置成功，这说明什么，说明你的数据库文件很容易被获取。centos 7 还好数据库文件是加密的，但是 6 上就不一样了 ，6 上全是明文。这样就更危险了，更容易被攻击。    </p>
</blockquote>
<blockquote>
<p> 还有一种就是不用配从服务器，直接用命令就可以获取某个域的区域信息。如下：  </p>
<pre><code>dig -t axfr magedu.com @192.168.30.7
</code></pre></blockquote>
<blockquote>
<p>  显而易见这样就存在太大的安全隐患，因此要想实现安全性，我们就应该禁止这种随意就能获取数据库的，所以就要在主服务器上加安全设置。  </p>
</blockquote>
<blockquote>
<p>   在主服务器上的主配置文件中添加内容。</p>
</blockquote>
<h6 id="vim-etc-named-conf"><a href="#vim-etc-named-conf" class="headerlink" title="vim /etc/named.conf"></a>vim /etc/named.conf</h6><blockquote>
<p> 还有或许你的服务器上不光有  magedu.com  这一个域，或许还有其他域，这就牵扯到你是想只对某个域做安全控制，还是对全局的域都做控制。  </p>
</blockquote>
<blockquote>
<p>   如果是对全局的域都做安全控制，那就在主配置文件中的  options  中添加一行内容，如下：  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow-transfer &#123; 192.168.30.17;192.168.30.27; &#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> ##“{}”  中的内容表示只允许这里面的IP能获取数据库，除此之外全部禁止。  </p>
</blockquote>
<pre><code>配置完后记得重新加载服务         rndc reload   
</code></pre><blockquote>
<p>这样其他IP的主机是不能获取了，但是拿从服务器的那两个IP还是可以获取的。还是不够安全。  </p>
<p>所以在主服务器上设置完后，还要在从服务器上也做设置。 </p>
</blockquote>
<blockquote>
<p>在从服务器上的主配置文件中添加内容。 </p>
</blockquote>
<h6 id="vim-etc-named-conf-1"><a href="#vim-etc-named-conf-1" class="headerlink" title="vim /etc/named.conf"></a>vim /etc/named.conf</h6><blockquote>
<p>  在配置文件中的 options 中添加一行内容<br>  allow-transfer  { none; };</p>
</blockquote>
<h6 id="这样才算安全了，当然这是针对全局设置的。"><a href="#这样才算安全了，当然这是针对全局设置的。" class="headerlink" title="这样才算安全了，当然这是针对全局设置的。"></a>这样才算安全了，当然这是针对全局设置的。</h6><h6 id="还有一种就是服务器上有两个域，一个-magedu-com-一个-wange-com-现在只想对-magedu-com-这个域进行安全控制，-wange-com-不管。这怎么实现？"><a href="#还有一种就是服务器上有两个域，一个-magedu-com-一个-wange-com-现在只想对-magedu-com-这个域进行安全控制，-wange-com-不管。这怎么实现？" class="headerlink" title="还有一种就是服务器上有两个域，一个 magedu.com  ,   一个   wange.com  ,现在只想对  magedu.com 这个域进行安全控制， wange.com 不管。这怎么实现？"></a>还有一种就是服务器上有两个域，一个 magedu.com  ,   一个   wange.com  ,现在只想对  magedu.com 这个域进行安全控制， wange.com 不管。这怎么实现？</h6><blockquote>
<p>  这回就不往主配置文件中添加内容了，而是在配置文件  /etc/named.rfc1912.zones  中在相应的域中添加控制信息。 </p>
</blockquote>
<blockquote>
<p>  比如，现在只对   magedu.com   加以控制。</p>
</blockquote>
<h6 id="就在-vim-etc-named-rfc1912-zones-中的-magedu-com-中添加-allow-transfer-192-168-30-17-，如下："><a href="#就在-vim-etc-named-rfc1912-zones-中的-magedu-com-中添加-allow-transfer-192-168-30-17-，如下：" class="headerlink" title="就在  vim /etc/named.rfc1912.zones    中的 magedu.com 中添加 allow-transfer  { 192.168.30.17; }; ，如下："></a>就在  vim /etc/named.rfc1912.zones    中的 magedu.com 中添加 allow-transfer  { 192.168.30.17; }; ，如下：</h6><p> 在  magedu.com  区域中添加  ：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;magedu.com&quot;   IN  &#123;</span><br><span class="line"> 		type slave;</span><br><span class="line">  masters &#123; 192.168.30.17; &#125;;</span><br><span class="line"> file &quot;slaves/magedu.com.zone.slave.slave&quot;;</span><br><span class="line">  allow-transfer  &#123; 192.168.30.17; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>然后重新加载服务     rndc  reload   </p>
</blockquote>
<h6 id="这就表示只有IP-为-192-168-30-17-这台主机能从主服务器上获取数据，其他的不行。"><a href="#这就表示只有IP-为-192-168-30-17-这台主机能从主服务器上获取数据，其他的不行。" class="headerlink" title="这就表示只有IP 为 192.168.30.17 这台主机能从主服务器上获取数据，其他的不行。"></a>这就表示只有IP 为 192.168.30.17 这台主机能从主服务器上获取数据，其他的不行。</h6><h5 id="这就是主从服务器同步。"><a href="#这就是主从服务器同步。" class="headerlink" title="这就是主从服务器同步。"></a>这就是主从服务器同步。</h5><blockquote>
<p>注意： 不管主服务器和从服务器一共有几个，一定要记得把所有主机服务器的DNS信息加到主服务器上的数据库中。比如，你这有主从服务器3个，那么就要在主服务器的数据库中添加3个NS记录。</p>
</blockquote>
<blockquote>
<p> 到此就实现了主从服务器的容错性了。那么理论上主服务器宕机了，那么从服务器就应该承担访问责任。<br>那么这是主服务器宕机了才去访问从服务器，那么如果主服务器没有宕机，只是在主服务器上就没有访问的域，那么客户访问这个域，会出现什么结果。一般主服务器会去找根。那么把外网断掉，把缓存清掉，客户再去连接，会出现什么结果。这样就会去找从服务器。  </p>
</blockquote>
<pre><code>清缓存的命令：   rndc  flush
</code></pre><blockquote>
<p> 现在用命令   dig magedu.com @192.168.30.7     是可以访问的，但是现在把UDP 的53 端口用命令iptables -A INPUT -p udp –dport 53 -j REJECT 给禁掉，  在用命令  dig magedu.com @192.168.30.7   发现不能访问了。  </p>
</blockquote>
<blockquote>
<p>现在把防火墙策略清空，iptables -F     </p>
</blockquote>
<blockquote>
<p> 在用命令把TCP的53 端口用命令  iptables -A INPUT -p tcp –dport 53 -j REJECT 给禁掉，在用命令  dig magedu.com @192.168.30.7  发现是可以访问的。<br>  所以总结，我们平时的名字解析IP 走的都是UDP协议。  </p>
</blockquote>
<blockquote>
<p>现在在主服务器上的数据库中添加一些内容并增加版本号，然后重新加载，到从服务器上查看 /etc/named/slaves/ 目录时间发现已经同步。那么现在用命令把端口53的TCP协议禁掉  iptables -A INPUT -p tcp –dport 53 -j REJECT     ，然后在对主服务器上的数据库进行修改并重新加载服务，再到从服务器上查看 /etc.named/slaves/ 目录的时间发现没有同步。  </p>
</blockquote>
<blockquote>
<p> 然后把防火墙策略清空  iptables -F ,然后把UDP 的53 端口禁掉 iptables -A INPUT -p udp –dport 53 -j REJECT    ，然后再次执行以上过程，发现也不能同步。  </p>
</blockquote>
<h5 id="总结：主服务器跟从服务器同步时，即走TCP-协议，也走-UDP-协议，两个一样都不能少。"><a href="#总结：主服务器跟从服务器同步时，即走TCP-协议，也走-UDP-协议，两个一样都不能少。" class="headerlink" title="总结：主服务器跟从服务器同步时，即走TCP 协议，也走 UDP 协议，两个一样都不能少。"></a>总结：主服务器跟从服务器同步时，即走TCP 协议，也走 UDP 协议，两个一样都不能少。</h5><h3 id="到此DNS的主从服务就搭建完了。欢迎来怼！！！"><a href="#到此DNS的主从服务就搭建完了。欢迎来怼！！！" class="headerlink" title="到此DNS的主从服务就搭建完了。欢迎来怼！！！"></a>到此DNS的主从服务就搭建完了。欢迎来怼！！！</h3></div><div class="tags"><a href="/tags/Linux/">Linux</a><a href="/tags/DNS/">DNS</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/04/01/Linux系统中su 和 sudo 的用法/" class="pre">Linux系统中su 和 sudo 的用法</a><a href="/2017/03/20/搭建DNS互联网架构服务器(一）/" class="next">搭建DNS互联网架构服务器</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Inhalte</i></div><ol class="toc"><li class="toc-item toc-level-6"><a class="toc-link" href="#然后启动服务-systemctl-start-named"><span class="toc-text">然后启动服务      systemctl start named</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#这样从服务器就搭建完成，现在回到主服务器上。"><span class="toc-text">这样从服务器就搭建完成，现在回到主服务器上。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#这是一台主服务器跟一个从服务器同步，理论上一般都是一个主服务器两个从服务器，接下来在搭一个从服务器。刚才是从服务器从主服务器那去同步，现在有个问题，能不能从服务器从从服务器上同步呢。"><span class="toc-text">这是一台主服务器跟一个从服务器同步，理论上一般都是一个主服务器两个从服务器，接下来在搭一个从服务器。刚才是从服务器从主服务器那去同步，现在有个问题，能不能从服务器从从服务器上同步呢。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#接下来搭建第二个从服务器，以192-168-30-27这台主机来做第二台从服务器-。"><span class="toc-text">接下来搭建第二个从服务器，以192.168.30.27这台主机来做第二台从服务器    。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#先装包-yum-install-bind"><span class="toc-text">先装包            yum install bind</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#启动后查看下-var-named-slaves-目录下生成文件没，如果生成说明同步成功。"><span class="toc-text">启动后查看下 /var/named/slaves/ 目录下生成文件没，如果生成说明同步成功。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#vim-etc-named-conf"><span class="toc-text">vim /etc/named.conf</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#vim-etc-named-conf-1"><span class="toc-text">vim /etc/named.conf</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#这样才算安全了，当然这是针对全局设置的。"><span class="toc-text">这样才算安全了，当然这是针对全局设置的。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#还有一种就是服务器上有两个域，一个-magedu-com-一个-wange-com-现在只想对-magedu-com-这个域进行安全控制，-wange-com-不管。这怎么实现？"><span class="toc-text">还有一种就是服务器上有两个域，一个 magedu.com  ,   一个   wange.com  ,现在只想对  magedu.com 这个域进行安全控制， wange.com 不管。这怎么实现？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#就在-vim-etc-named-rfc1912-zones-中的-magedu-com-中添加-allow-transfer-192-168-30-17-，如下："><span class="toc-text">就在  vim /etc/named.rfc1912.zones    中的 magedu.com 中添加 allow-transfer  { 192.168.30.17; }; ，如下：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#这就表示只有IP-为-192-168-30-17-这台主机能从主服务器上获取数据，其他的不行。"><span class="toc-text">这就表示只有IP 为 192.168.30.17 这台主机能从主服务器上获取数据，其他的不行。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#这就是主从服务器同步。"><span class="toc-text">这就是主从服务器同步。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#总结：主服务器跟从服务器同步时，即走TCP-协议，也走-UDP-协议，两个一样都不能少。"><span class="toc-text">总结：主服务器跟从服务器同步时，即走TCP 协议，也走 UDP 协议，两个一样都不能少。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#到此DNS的主从服务就搭建完了。欢迎来怼！！！"><span class="toc-text">到此DNS的主从服务就搭建完了。欢迎来怼！！！</span></a></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Nginx 各种实验演示/">Nginx 各种实验演示</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Nginx 详细介绍/">Nginx 详细介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/日志管理介绍/">日志管理介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/09/Linux 防火墙各种规则实战应用/">Linux 防火墙各种规则实战应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/08/keepalived高可用/">Ansible</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/15/memcache  缓存原理介绍/">memcache  缓存原理介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/08/tomcat 各种架构实验演示/">tomcat 各种架构实验演示</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/05/浅谈 tomcat 原理/">浅谈 tomcat 原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/25/Varnish 缓存服务器介绍/">Varnish 缓存服务器介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/keepalived 各种高可用实战演练/">keepalived 各种高可用实战演练</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/varnish/" style="font-size: 15px;">varnish</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/DNS/" style="font-size: 15px;">DNS</a> <a href="/tags/haproxy/" style="font-size: 15px;">haproxy</a> <a href="/tags/LAMP/" style="font-size: 15px;">LAMP</a> <a href="/tags/权限管理/" style="font-size: 15px;">权限管理</a> <a href="/tags/用户组/" style="font-size: 15px;">用户组</a> <a href="/tags/练习题/" style="font-size: 15px;">练习题</a> <a href="/tags/文件系统/" style="font-size: 15px;">文件系统</a> <a href="/tags/su和sudo/" style="font-size: 15px;">su和sudo</a> <a href="/tags/MYSQL/" style="font-size: 15px;">MYSQL</a> <a href="/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/DHCP/" style="font-size: 15px;">DHCP</a> <a href="/tags/keepalied/" style="font-size: 15px;">keepalied</a> <a href="/tags/自动化/" style="font-size: 15px;">自动化</a> <a href="/tags/memcache/" style="font-size: 15px;">memcache</a> <a href="/tags/lvs/" style="font-size: 15px;">lvs</a> <a href="/tags/rpm/" style="font-size: 15px;">rpm</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/共享服务/" style="font-size: 15px;">共享服务</a> <a href="/tags/自动化安装/" style="font-size: 15px;">自动化安装</a> <a href="/tags/基本命令/" style="font-size: 15px;">基本命令</a> <a href="/tags/CA/" style="font-size: 15px;">CA</a> <a href="/tags/dns/" style="font-size: 15px;">dns</a> <a href="/tags/sed/" style="font-size: 15px;">sed</a> <a href="/tags/mini系统/" style="font-size: 15px;">mini系统</a> <a href="/tags/进程管理、计划任务/" style="font-size: 15px;">进程管理、计划任务</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archiv</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">Über</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">John Doe.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>